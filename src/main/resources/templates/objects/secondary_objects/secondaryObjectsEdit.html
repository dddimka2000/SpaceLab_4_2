<!DOCTYPE html>
<html
        lang="en"
        class="light-style layout-navbar-fixed layout-menu-fixed"
        layout:decorate="~{layout.html}" xmlns:layout="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <link rel="icon" type="image/x-icon"
          th:href="@{/img/favicon/1644809631_5-abrakadabra-fun-p-domik-na-belom-fone-12.png}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.maskedinput@1.4.1/src/jquery.maskedinput.min.js"
            type="text/javascript"></script>
    <link rel="stylesheet" th:href="@{/vendor/fonts/fontawesome.css}">
    <link rel="stylesheet" th:href="@{/vendor/fonts/tabler-icons.css}">
    <link rel="stylesheet" th:href="@{/vendor/fonts/flag-icons.css}">
    <link rel="stylesheet" th:href="@{/css/demo.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/node-waves/node-waves.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/typeahead-js/typeahead.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/select2/select2.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/formvalidation/dist/css/formValidation.min.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/animate-css/animate.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/sweetalert2/sweetalert2.css}">
    <!--    <script th:src="@{/js/config.js}"></script>-->
    <!--    <script th:src="@{/vendor/js/template-customizer.js}"></script>-->
    <script th:src="@{/vendor/js/helpers.js}"></script>
    <link rel="stylesheet" th:href="@{/vendor/libs/typeahead-js/typeahead.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/dropzone/dropzone.css}">
    <script th:src="@{/vendor/libs/select2/select2.js}"></script>
    <style>
        .notification {
            position: fixed;
            top: 90px;
            right: 40px; /* Расстояние справа */
            padding: 10px;
            border: 1px solid #ccc;
            text-align: center;
            transition: opacity 0.5s ease-in-out;
        }

        .notification.hidden {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
</body>

<main layout:fragment="content">

    <div class="content-wrapper">
        <div class="container-fluid">
            <br>
            <div class="d-flex justify-content-between">
                <h4 class="fw-bold" data-translate="new_object">Новый объект</h4>
                <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" class="d-flex align-items-center">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a th:href="@{/}" data-translate="main">Главная</a></li>
                        <li class="breadcrumb-item" data-translate="secondary_real_estate"><a
                                th:href="@{/secondary_objects}" data-translate="edit_secondary_real_estate"
                        >Вторичная недвижимость</a></li>
                        <li class="breadcrumb-item active" aria-current="page"
                            th:href="@{/secondary_objects/create}" data-translate="create_secondary_real_estate">
                            Создание вторичной недвижимости
                        </li>
                    </ol>
                </nav>
            </div>
            <hr style="margin-top: -5px">
            <br>

            <ul class="nav nav-pills mb-3" role="tablist">
                <li class="nav-item">
                    <button class="nav-link active" type="button" aria-selected="true" data-toggle="tab" role="tab"
                            data-bs-toggle="pill" onclick="changeInput('ru')">Ру
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" type="button" aria-selected="false" data-toggle="tab" role="tab"
                            data-bs-toggle="pill" onclick="changeInput('eu')">Eng
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" type="button" aria-selected="false" data-toggle="tab" role="tab"
                            data-bs-toggle="pill" onclick="changeInput('ukr')">Укр
                    </button>
                </li>
            </ul>
            <br>
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-home"
                            type="button" role="tab" aria-controls="pills-home" aria-selected="true"
                            data-translate="address_section">Адрессная часть
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-profile"
                            type="button" role="tab" aria-controls="pills-profile" aria-selected="false"
                            data-translate="main_section">Основное
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-contact"
                            type="button" role="tab" aria-controls="pills-contact" aria-selected="false"
                            data-translate="gallery">Галерея
                    </button>
                </li>
            </ul>
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                    <div class="row">

                        <div class="col-3">
                            <h6 data-translate="region_district">Обл.район</h6>

                            <select class="select2 form-select form-select select2find" name="region" id="region">
                                <option selected disabled></option>
                                <script th:inline="javascript">
                                    var selectRegionOptions = /*[[${selectRegion}]]*/ [];
                                    var selectRegion = /*[[${element.getAddress().getRegion()}]]*/ '';

                                    for (var i = 0; i < selectRegionOptions.length; i++) {
                                        var entity = selectRegionOptions[i];
                                        var isSelected = (entity === selectRegion);
                                        document.write('<option value="' + entity + '" data-translate="' + entity.replace(' ', '_') + '"' + (isSelected ? ' selected' : '') + '>' + entity + '</option>');
                                    }
                                    refreshAllTranslate()
                                </script>

                            </select>

                        </div>
                        <div class="col-3">
                            <h6 data-translate="city">Нас.пункт</h6>
                            <select class="select2 form-select form-select select2find" name="city" disabled>
                            </select>
                        </div>
                        <div class="col-2">
                            <h6 data-translate="district">Район</h6>
                            <select class="select2 form-select form-select select2find" name="district" disabled>
                                <option selected value="" disabled></option>
                            </select></div>
                        <div class="col-2">
                            <div style="display:block;" class="ruContent nameContent">
                                <h6 data-translate="street">Улица</h6>
                                <input class="form-control" type="text" name="street" id="street"
                                       data-translate-placeholder="enter_street" placeholder="Введите улицу"
                                       th:value="${element.getAddress().getStreet()}">
                            </div>
                            <div style="display:none;" class="euContent nameContent">
                                <h6 data-translate="street">Улица</h6>
                                <input class="form-control" type="text" name="streetEu" id="streetEu"
                                       data-translate-placeholder="enter_street" placeholder="Введите улицу"
                                       th:value="${element.getAddress().getStreetEng()}">
                            </div>
                            <div style="display:none;" class="ukrContent nameContent">
                                <h6 data-translate="street">Улица</h6>
                                <input class="form-control" type="text" name="streetUkr" id="streetUkr"
                                       data-translate-placeholder="enter_street" placeholder="Введите улицу"
                                       th:value="${element.getAddress().getStreetUkr()}">
                            </div>
                        </div>
                        <div class="col-2">
                            <h6 data-translate="topzone">Топозона</h6>
                            <select class="select2 form-select form-select select2find" name="topozone">
                                <option value="" disabled selected></option>
                                <option th:each="entity : ${selectTopozone}"
                                        th:value="${entity}" th:data-translate="${entity}"
                                        th:text="${entity}"
                                        th:selected="${element.getAddress().getZone() == entity}"></option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-2">
                            <h6 data-translate="house_number">Номер дома</h6>
                            <input class="form-control" type="number" name="houseNumber"
                                   placeholder="10A" th:value="${element.getAddress().getHouseNumber()}">
                        </div>
                        <div class="col-2">
                            <h6 data-translate="section_building">Секция/Корпус</h6>
                            <input class="form-control" type="number" name="section"
                                   placeholder="5" th:value="${element.getAddress().getSection()}">
                        </div>
                        <div class="col-2">
                            <h6 data-translate="apartment_number">Номер квартиры</h6>
                            <input type="text" class="form-control" name="apartmentNumber" id="apartmentNumber"
                                   placeholder="87" th:value="${element.getApartmentNumber()}">
                        </div>
                        <div class="col-3" style="display: flex;align-items: end">
                            <button class="btn btn-info" onclick="checkNumber()">Проверить номер телефона</button>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-3">
                            <div style="display:block;" class="ruContent nameContent">
                                <h6 data-translate="owner_name">ФИО владельца </h6>
                                <input class="form-control" type="text" name="owner"
                                       data-translate-placeholder="enter_owner_name" placeholder="Введите ФИО владельца"
                                       th:value="${element.getOwnerName()}">
                            </div>
                            <div style="display:none;" class="euContent nameContent">
                                <h6 data-translate="owner_name">ФИО владельца </h6>
                                <input class="form-control" type="text" name="ownerEu"
                                       data-translate-placeholder="enter_owner_name" placeholder="Введите ФИО владельца"
                                       th:value="${element.getOwnerNameEng()}">
                            </div>
                            <div style="display:none;" class="ukrContent nameContent">
                                <h6 data-translate="owner_name">ФИО владельца </h6>
                                <input class="form-control" type="text" name="ownerUkr"
                                       data-translate-placeholder="enter_owner_name" placeholder="Введите ФИО владельца"
                                       th:value="${element.getOwnerNameUkr()}">
                            </div>
                        </div>
                        <div class="col-3">
                            <h6 data-translate="phone">Телефон</h6>
                            <input type="tel" name="telephone" id="telephone" class="form-control"
                                   data-translate-placeholder="enter_phone_number" placeholder="Введите номер телефона"
                                   th:value="${element.getOwnerPhone()}">
                        </div>
                        <div class="col-3">
                            <h6 data-translate="acquisition_date">Дата приобретения</h6>
                            <input class="form-control flatpickr-datetime" type="text" placeholder="YYYY/MM/DD"
                                   aria-describedby="defaultFormControlHelp" id="boughtDate" name="boughtDate"
                                   value="" th:value="${element.getBoughtDate()}">
                        </div>
                        <div class="col-3">
                            <h6 data-translate="ownership_rights">Право собственности</h6>
                            <select class="select2 form-select form-select select2find" name="ownership">
                                <option th:each="status : ${ownershipType}"
                                        th:value="${status}"
                                        th:text="${status.status}" th:data-translate="${status}"
                                        th:selected="${element.getOwnershipType() == status}"></option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <h6 data-translate="important_notes">Важные заметки</h6>
                    <input class="form-control" type="text" id="notes" placeholder="Введите заметки"
                           th:value="${element.getNotes()}">
                    <br>
                    <h6 data-translate="attach_files">Прикрепить файлы</h6>
                    <input type="file" class="form-control" name="fileInput" id="fileInput" onchange="showFile()">
                    <br>
                    <div id="fileList">
                    </div>
                    <br>
                    <h3 data-translate="admin_comment">Комментарий администратора</h3>
                    <textarea class="form-control" style="width: 100%; height: 300px"
                              name="comment" placeholder="Введите комментарий"
                              data-translate-placeholder="enter_comment"
                              th:text="${element.getAdministrationComment()}"></textarea>
                    <br>
                </div>
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-contact-tab">
                    <div class="row">
                        <div class="col-2">
                            <h6 data-translate="publication_status">Статус публикации</h6>
                            <select class="select2 form-select form-select select2find" id="publicationStatus">
                                <option th:each="status : ${publicationStatus}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getPublicationStatus() == null ? (status == null) : (element.getPublicationStatus() == status)}"></option>
                            </select>


                        </div>
                        <div class="col-2">
                            <h6 data-translate="object_code">Код объекта</h6>
                            <input class="form-control" type="text" id="codeObject" placeholder="100-101-102"
                                   name="codeObject" th:value="${element.getObjectCode()}">
                        </div>
                        <div class="col-5">
                            <div class="row">
                                <div class="col-3" style="text-align: right">
                                    <h6 data-translate="branch_code">Код филиала</h6>
                                </div>
                                <div class="col-1">
                                    <h6>—</h6>
                                </div>
                                <div class="col-4">
                                    <h6 data-translate="employee_code"> код сотрудника</h6>
                                </div>
                            </div>
                            <div class="row" style="display:flex; align-items: center">
                                <div class="col-3" style="text-align: right">
                                    <input class="form-control" type="number" id="codeBranch" placeholder="Код филиала"
                                           name="codeBranch" th:value="${element.getBranchCode()}">
                                </div>
                                <div class="col-1">
                                    <span><h6>—</h6></span>
                                </div>
                                <div class="col-3">
                                    <input class="form-control" type="number" id="codeStaff" name="codeStaff"
                                           placeholder="Код сотрудника" th:value="${element.getRealtor().getId()}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-2">
                            <h6 data-translate="RC">ЖК</h6>
                            <select id="branchSelect3" class="select2 form-select form-select"
                                    name="residentialComplex">
                            </select>
                        </div>
                        <div class="col-2">
                            <h6 data-translate="landmark">Ориентир</h6>
                            <input class="form-control" type="text" id="reference_point" placeholder="Введите ориентир"
                                   data-translate-placeholder="enter_landmark" th:value="${element.getLandmark()}">
                        </div>
                        <div class="col-2">
                            <h6 data-translate="number_of_floors">Этажность</h6>
                            <input class="form-control" type="number" name="floorQuantity"
                                   data-translate-placeholder="5" placeholder="5"
                                   th:value="${element.getFloorQuantity()}">
                        </div>
                        <div class="col-2">
                            <h6 data-translate="floor">Этаж</h6>
                            <input class="form-control" type="number" name="floor" placeholder="5"
                                   th:value="${element.getFloor()}">
                        </div>
                        <div class="col-2">
                            <h6 data-translate="rooms">Комнат</h6>
                            <input data-translate-placeholder="2" class="form-control" type="number" id="rooms"
                                   placeholder="5"
                                   th:value="${element.getRoomQuantity()}">
                        </div>
                        <div class="col-2">
                        </div>
                    </div>
                    <br>
                    <h6 data-translate="price">Цена</h6>
                    <input class="form-control" type="number" id="price" placeholder="20000"
                           data-translate-placeholder="5"
                           th:value="${element.getPrice()}">
                    <br>
                    <div class="row">
                        <div class="col-2">
                            <h6 data-translate="property.type.real.estate">Тип недвижимости</h6>
                            <select id="propertySecondaryType" class="select2 form-select form-select select2find">
                                <option selected value="" disabled></option>
                                <option th:each="status : ${propertySecondaryType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getPropertyType() == status}"></option>
                            </select>
                        </div>
                        <div class="col-2">
                            <h6 data-translate="house_completion_year">Год срока сдачи дома</h6>
                            <input type="number" class="form-control" data-translate-placeholder="2025"
                                   placeholder="Введите год срока сдачи дома" id="yearBuilding"
                                   th:value="${element.getBuildFinishDate}">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-2">
                            <h6 data-translate="S_total_area_sqm">S общая (м.кв.)*</h6>
                            <input class="form-control" type="number" id="areaTotal"
                                   placeholder="60" th:value="${element.getAreaTotal()}">
                        </div>
                        <div class="col-2">
                            <h6 data-translate="S_living_area_sqm">S жилая (м.кв.)*</h6>
                            <input class="form-control" type="number" id="areaLiving"
                                   placeholder="20" th:value="${element.getAreaLiving()}">
                        </div>
                        <div class="col-2">
                            <h6 data-translate="S_kitchen_area_sqm">S кухни (м.кв.)*</h6>
                            <input class="form-control" type="number" id="areaKitchen"
                                   placeholder="20" th:value="${element.getAreaKitchen()}">
                        </div>
                        <div class="col-2">
                            <h6 data-translate="layout">Планировка</h6>
                            <select id="layoutType" class="select2 form-select form-select select2find">
                                <option selected value="" disabled></option>
                                <option th:each="status : ${layoutType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getLayoutType() == status}"></option>
                            </select></div>
                        <div class="col-2">
                            <h6 data-translate="room_square">Метраж комнат</h6>
                            <input class="form-control" type="text" id="footageOfRooms"
                                   placeholder="10+10+10" th:value="${element.getRoomMeters()}">

                        </div>
                        <div class="col-2">
                            <h6 data-translate="ceiling_height(m)">Высота потолка (м)</h6>
                            <input class="form-control" type="number" step="0.01" id="myNumberInput"
                                   placeholder="4,2" th:value="${element.getHeightCeiling()}">
                        </div>
                    </div>

                    <br>
                    <div class="row">
                        <div class="col-3">
                            <h6 data-translate="apartment_condition">Состояние квартиры</h6>
                            <select id="propertyOrigin" class="select2 form-select form-select select2find">
                                <option selected value="" disabled></option>
                                <option th:each="status : ${propertyOrigin}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getPropertyOrigin()==status}"></option>
                            </select>
                        </div>
                        <div class="col-3">
                            <h6 data-translate="wall_material">Материал стен</h6>
                            <div style="display:block;" class="ruContent nameContent">
                                <input class="form-control" type="text" id="wall_material"
                                       data-translate-placeholder="enter_wall_material"
                                       placeholder="Введите материал стен" th:value="${element.getWallMaterial()}">
                            </div>
                            <div style="display:none;" class="euContent nameContent">
                                <input class="form-control" type="text" id="wall_materialEn"
                                       data-translate-placeholder="enter_wall_material"
                                       placeholder="Введите материал стен" th:value="${element.getWallMaterialEng()}">
                            </div>
                            <div style="display:none;" class="ukrContent nameContent">
                                <input class="form-control" type="text" id="wall_materialUkr"
                                       data-translate-placeholder="enter_wall_material"
                                       placeholder="Введите материал стен" th:value="${element.getWallMaterialUkr()}">
                            </div>
                        </div>
                        <div class="col-3">
                            <h6 data-translate="apartment_design">Проект квартиры</h6>
                            <select id="houseProjectType" class="select2 form-select form-select select2find">
                                <option selected value="" disabled></option>
                                <option th:each="status : ${houseProjectType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getHouseProjectType()==status}"></option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-3">
                            <h6 data-translate="kitchen">Кухня</h6>
                            <select id="kitchen" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${kitchenType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getKitchenType()==status}"></option>
                            </select></div>
                        <div class="col-3">
                            <h6 data-translate="bathroom">Санузел</h6>
                            <select id="bathroom" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${bathroomType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getBathroomType()==status}"></option>
                            </select>
                        </div>
                        <div class="col-2">
                            <h6 data-translate="balcony_loggia">Балкон/лоджия</h6>
                            <select id="balcony" class="select2 form-select form-select select2find" name="balconyType">
                                <option selected disabled></option>
                                <option th:each="status : ${balconyType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getBalconyType()==status}"></option>
                            </select>
                        </div>
                        <div class="col-2">
                            <h6 data-translate="window_view">Вид из окон</h6>
                            <select id="viewWindow" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${windowViewType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getViewType()==status}"></option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-3">
                            <h6 data-translate="stove_type">Кухонная плита</h6>
                            <select class="select2 form-select form-select select2find" name="kitchenStoveType"
                                    id="kitchenStove">
                                <option disabled></option>
                                <option th:each="status : ${kitchenStoveType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getStoveType()==status}"></option>
                            </select></div>
                        <div class="col-3">
                            <h6 data-translate="heating">Отопление
                            </h6>
                            <select id="heating" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${heatingType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getHeatingType()==status}"></option>
                            </select>
                        </div>
                        <div class="col-3">
                            <h6 data-translate="stairs">Лестница</h6>
                            <select id="ladderType" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${ladderType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getLadderType()==status}"></option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-3">
                            <h6 data-translate="floorDoor">Пол</h6>
                            <select class="select2 form-select form-select select2find" name="floorType"
                                    id="floorType">
                                <option selected disabled></option>
                                <option th:each="status : ${FloorType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getFloorType()==status}"></option>
                            </select></div>
                        <div class="col-3">
                            <h6 data-translate="window.type">Тип окон</h6>
                            <select id="windowType" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${WindowType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getWindowType()==status}"></option>
                            </select>
                        </div>
                        <div class="col-3">
                            <h6 data-translate="carpentry">Столярка</h6>
                            <select id="carpentryType" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${CarpentryType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getCarpentryType()==status}"></option>
                            </select>
                        </div>
                        <div class="col-3">
                            <h6 data-translate="front.door">Входная дверь</h6>
                            <select id="frontDoorType" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${FrontDoorType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getFrontDoorType()==status}"></option>
                            </select>
                        </div>
                        <br>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-2">
                            <h6 data-translate="last_contact_date">Дата последнего контакта</h6>
                            <input class="form-control flatpickr-datetime" type="text" placeholder="YYYY/MM/DD"
                                   aria-describedby="defaultFormControlHelp" id="dateLastContact" name="dateLastContact"
                                   th:value="${element.getLastContactDate()}">
                        </div>
                        <div class="col-1" style="display: flex; align-items: end">
                            <input class="form-check-input" type="checkbox" value="true" name="statusVNP"
                                   th:checked="${element.getVnp}">
                            <span class="checkmark" data-translate="VNP"> ВНП</span>
                        </div>
                        <div class="col-2">
                            <h6 data-translate="VNP_until_date">Дата внп до</h6>
                            <input class="form-control flatpickr-datetime" type="text" placeholder="YYYY/MM/DD"
                                   aria-describedby="defaultFormControlHelp" id="dateVNP" name="dateVnp"
                                   th:value="${element.getVnpExpirationDate()}">
                        </div>
                        <div class="col-2">
                            <h6 data-translate="information_source">Источник информации</h6>
                            <input type="text" class="form-control" id="sourceInformation"
                                   data-translate-placeholder="enter_information_source"
                                   placeholder="Введите источник информации" th:value="${element.informationSource}">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" value="true" name="tor"
                                   th:checked="${element.bargain}">
                            <span class="checkmark" data-translate="negotiable">Торг</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" value="true" name="exclusive"
                                   th:checked="${element.exclusive}">
                            <span class="checkmark" data-translate="exclusive">Ексклюзив</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" value="true" name="urgently"
                                   th:checked="${element.urgent}">
                            <span class="checkmark" data-translate="urgent">Срочно</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" value="true" name="free"
                                   th:checked="${element.free}">
                            <span class="checkmark" data-translate="free">Свободная</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" value="true" name="objectOpen"
                                   th:checked="${element.open}">
                            <span class="checkmark" data-translate="object_open">Объект открыт</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" value="true" name="fromIntermediary"
                                   th:checked="${element.intermediary}">
                            <span class="checkmark" data-translate="FROM_INTERMEDIARY">От посредника</span>
                        </div>
                    </div>
                    <br>
                    <h6 data-translate="description">Описание</h6>
                    <div style="display:block;" class="ruContent nameContent">
                        <textarea class="form-control" style="width: 100%; height: 300px"
                                  name="descriptionObject" placeholder="Введите описание"
                                  data-translate-placeholder="enter_description"
                                  th:text="${element.description}"></textarea>
                    </div>
                    <div style="display:none;" class="euContent nameContent">
                        <textarea class="form-control" style="width: 100%; height: 300px"
                                  name="descriptionObjectEu" placeholder="Введите описание"
                                  data-translate-placeholder="enter_description"
                                  th:text="${element.descriptionEn}"></textarea>
                    </div>
                    <div style="display:none;" class="ukrContent nameContent">
                         <textarea class="form-control" style="width: 100%; height: 300px"
                                   name="descriptionObjectUkr" placeholder="Введите описание"
                                   data-translate-placeholder="enter_description"
                                   th:text="${element.descriptionUk}"></textarea>
                    </div>
                    <h6 data-translate="advertising_title">Рекламный заголовок</h6>
                    <div style="display:block;" class="ruContent nameContent">
                        <input type="text" name="advertisingName" id="promotionName" class="form-control"
                               data-translate-placeholder="enter_ad_title" placeholder="Укажите рекламный заголовок"
                               th:value="${element.advertisementHeadline}">
                    </div>
                    <div style="display:none;" class="euContent nameContent">
                        <input type="text" name="advertisingNameEu" id="promotionNameEu" class="form-control"
                               data-translate-placeholder="enter_ad_title" placeholder="Укажите рекламный заголовок"
                               th:value="${element.advertisementHeadlineEn}">
                    </div>
                    <div style="display:none;" class="ukrContent nameContent">
                        <input type="text" name="advertisingNameUkr" id="promotionNameUkr" class="form-control"
                               data-translate-placeholder="enter_ad_title" placeholder="Укажите рекламный заголовок"
                               th:value="${element.advertisementHeadlineUk}">
                    </div>
                    <br>
                    <h6 data-translate="advertising_text">Рекламный текст</h6>
                    <div style="display:block;" class="ruContent nameContent">
                       <textarea style="width: 100%; height: 300px" name="advertisingText"
                                 class="form-control" placeholder="Введите рекламный текст"
                                 data-translate-placeholder="enter_ad_text"
                                 th:text="${element.advertisementText}"></textarea>
                    </div>
                    <div style="display:none;" class="euContent nameContent">
                        <textarea style="width: 100%; height: 300px" name="advertisingTextEu"
                                  class="form-control" placeholder="Введите рекламный текст"
                                  data-translate-placeholder="enter_ad_text"
                                  th:text="${element.advertisementTextEn}"></textarea>
                    </div>
                    <div style="display:none;" class="ukrContent nameContent">
                        <textarea style="width: 100%; height: 300px" name="advertisingTextUkr"
                                  class="form-control" placeholder="Введите рекламный текст"
                                  data-translate-placeholder="enter_ad_text"
                                  th:text="${element.advertisementTextUk}"></textarea>
                    </div>
                    <br>
                    <input class="form-check-input" type="checkbox" value="true" name="statusPromotion"
                           th:checked="${element.advertisementEnabled}"><span
                        class="checkmark" data-translate="advertise">Рекламировать</span>
                </div>
                <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-profile-tab">

                    <div class="row">
                        <div class="col-12">
                            <div class="card-body">
                                <form action="/uploadFileSecondary_objects" class="dropzone needsclick dz-clickable"
                                      id="my-dropzoneSecondary_objects">
                                    <div class="dz-message needsclick">
                                        <span class="note needsclick"></span>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div style="text-align: right; margin: 20px">
                <span>
                <button class="btn btn-success" hx-trigger="click" onclick="sendForm()" data-translate="save">
                Сохранить </button>
            </span>
            </div>
        </div>
    </div>
    <div class="alert alert-warning notification  d-flex align-items-center hidden" role="alert"
         id="notification">
        <svg width="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5.94118 10.7474V20.7444C5.94118 21.0758 5.81103 21.3936 5.57937 21.628C5.3477 21.8623 5.0335 21.994 4.70588 21.994H2.23529C1.90767 21.994 1.59347 21.8623 1.36181 21.628C1.13015 21.3936 1 21.0758 1 20.7444V11.997C1 11.6656 1.13015 11.3477 1.36181 11.1134C1.59347 10.879 1.90767 10.7474 2.23529 10.7474H5.94118ZM5.94118 10.7474C7.25166 10.7474 8.50847 10.2207 9.43512 9.28334C10.3618 8.34594 10.8824 7.07456 10.8824 5.74887V4.49925C10.8824 3.83641 11.1426 3.20071 11.606 2.73201C12.0693 2.26331 12.6977 2 13.3529 2C14.0082 2 14.6366 2.26331 15.0999 2.73201C15.5632 3.20071 15.8235 3.83641 15.8235 4.49925V10.7474H19.5294C20.1847 10.7474 20.8131 11.0107 21.2764 11.4794C21.7397 11.9481 22 12.5838 22 13.2466L20.7647 19.4947C20.5871 20.2613 20.25 20.9196 19.8045 21.3704C19.3589 21.8211 18.8288 22.04 18.2941 21.994H9.64706C8.6642 21.994 7.72159 21.599 7.0266 20.896C6.33162 20.1929 5.94118 19.2394 5.94118 18.2451"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
        </svg>
        <strong id="text_notification"></strong>
        <div>
            <span id="notification-message"></span>
        </div>
    </div>
    <script th:src="@{/vendor/libs/dropzone/dropzone.js}"></script>

    <link rel="stylesheet" th:href="@{/vendor/libs/flatpickr/flatpickr.css}"/>
    <script th:src="@{/vendor/libs/flatpickr/flatpickr.js}"></script>

    <script th:inline="javascript">
        $(document).ready(function () {
            // Находим все элементы с классом .flatpickr
            var flatpickrElements = document.querySelectorAll(".flatpickr-datetime");

// Применяем flatpickr к каждому элементу
            flatpickrElements.forEach(function (element) {
                flatpickr(element, {
                    dateFormat: "Y/m/d"
                });
            });

        });
    </script>
    <script th:inline="javascript">
        function checkNumber() {
            let checkNumber = $("#telephone").val()
            var regExp = /^\+380(31|32|33|34|35|36|38|39|41|43|44|45|46|20|89|94|92|91|67|68|96|97|98|70|90|91|67|68|96|97|98|70|87|89|50|66|95|99)\d{7}$/;
            console.log(checkNumber)
            if (regExp.test(checkNumber)) {
                showNotification("Номер корректный", "", true)
            } else {
                showNotification("Такого номера не существует", "", false)
            }
        }

        let langOld = "ru";

        function changeInput(lang) {
            $(".nameContent").css("display", "none")
            $("." + lang + "Content").css("display", "block");
            langOld = lang.toString();
            console.log(langOld)
        }


        function sendForm() {
            let formData = new FormData();
            var address = {
                region: $("#region").val(),

                street: $("#street").val(),
                streetEng: $("#streetEu").val(),
                streetUkr: $("#streetUkr").val(),

                district: $('[name="district"]').val(),
                city: $('[name="city"]').val(),
                zone: $('[name="topozone"]').val(),
                section: $('[name="section"]').val(),
                houseNumber: $('[name="houseNumber"]').val()
            };
            for (var key in address) {
                if (address.hasOwnProperty(key)) {
                    formData.append("address." + key, address[key]);
                }
            }


            formData.append("apartmentNumber", $('[name="apartmentNumber"]').val());
            formData.append("buildFinishDate", $("#yearBuilding").val());


            formData.append("ownerName", $('[name="owner"]').val());
            formData.append("ownerNameEng", $('[name="ownerEu"]').val());
            formData.append("ownerNameUkr", $('[name="ownerUkr"]').val());

            formData.append("ownerPhone", $('[name="telephone"]').val());
            console.log($('[name="boughtDate"]').val())
            formData.append("boughtDate", $('[name="boughtDate"]').val());
            console.log($('[name="boughtDate"]').val());
            let indexFilesMap = 0;
            if (fileMap.size > 0) {
                for (const [key, file] of fileMap) {
                    formData.append(key, file);
                    formData.append(`files[${indexFilesMap}]`, file);
                    indexFilesMap++;
                }
            }
            if (oldFileMap.size > 0) {
                for (const [key, file] of oldFileMap) {
                    formData.append(key, file);
                    formData.append(`oldFiles[${indexFilesMap}]`, file);
                    indexFilesMap++;
                }
            }
            formData.append("administrationComment", $('[name="comment"]').val());
            formData.append("publicationStatus", $("#publicationStatus").val());
            formData.append("objectCode", $('[name="codeObject"]').val());
            formData.append("branchCode", $('[name="codeBranch"]').val());
            formData.append("employeeCode", $('[name="codeStaff"]').val());
            formData.append("ownershipType", $('[name="ownership"]').val());
            formData.append("landmark", $("#reference_point").val());
            formData.append("residentialComplexId", $('[name="residentialComplex"]').val());
            formData.append("floorQuantity", $('[name="floorQuantity"]').val());
            formData.append("floor", $('[name="floor"]').val());
            formData.append("employeeCode", $('[name="codeStaff"]').val());
            formData.append("roomQuantity", $("#rooms").val());
            formData.append("price", $("#price").val());
            formData.append("notes", $("#notes").val());

            formData.append("areaTotal", $("#areaTotal").val());
            formData.append("areaLiving", $("#areaLiving").val());
            formData.append("areaKitchen", $("#areaKitchen").val());
            formData.append("roomMeters", $("#footageOfRooms").val());

            formData.append("heightCeiling", $("#myNumberInput").val());
            formData.append("wallMaterial", $("#wall_material").val());
            formData.append("wallMaterialEng", $("#wall_materialEn").val());
            formData.append("wallMaterialUkr", $("#wall_materialUkr").val());


            formData.append("propertyType", $("#propertySecondaryType").val());
            formData.append("kitchenType", $("#kitchen").val());

            formData.append("bathroomType", $("#bathroom").val());
            formData.append("balconyType", $("#balcony").val());
            formData.append("viewType", $("#viewWindow").val());
            formData.append("stoveType", $("#kitchenStove").val());
            formData.append("heatingType", $("#heating").val());


            formData.append("lastContactDate", $("#dateLastContact").val());
            formData.append("vnp", $('[name="statusVNP"]').prop("checked"));
            formData.append("vnpExpirationDate", $("#dateVNP").val());

            formData.append("informationSource", $("#sourceInformation").val());
            formData.append("bargain", $('[name="tor"]').prop("checked"));
            formData.append("exclusive", $('[name="exclusive"]').prop("checked"));
            formData.append("urgent", $('[name="urgently"]').prop("checked"));
            formData.append("free", $('[name="free"]').prop("checked"));
            formData.append("open", $('[name="objectOpen"]').prop("checked"));
            formData.append("intermediary", $('[name="fromIntermediary"]').prop("checked"));

            formData.append("description", $('[name="descriptionObject"]').val());
            formData.append("descriptionEn", $('[name="descriptionObjectEu"]').val());
            formData.append("descriptionUk", $('[name="descriptionObjectUkr"]').val());


            formData.append("advertisementHeadline", $('[name="advertisingName"]').val());
            formData.append("advertisementHeadlineEn", $('[name="advertisingNameEu"]').val());
            formData.append("advertisementHeadlineUk", $('[name="advertisingNameUkr"]').val());

            formData.append("advertisementText", $('[name="advertisingText"]').val());
            formData.append("advertisementTextEn", $('[name="advertisingTextEu"]').val());
            formData.append("advertisementTextUk", $('[name="advertisingTextUkr"]').val());

            formData.append("advertisementEnabled", $('[name="statusPromotion"]').prop("checked"));

            formData.append("layoutType", $("#layoutType").val());
            formData.append("houseProjectType", $("#houseProjectType").val());
            formData.append("ladderType", $("#ladderType").val());
            formData.append("floorType", $("#floorType").val());
            formData.append("windowType", $("#windowType").val());
            formData.append("carpentryType", $("#carpentryType").val());
            formData.append("frontDoorType", $("#frontDoorType").val());

            formData.append("propertyOrigin", $("#propertyOrigin").val());

            let i = 1;
            for (let [fileName, file] of uploadedFiles) {
                if (i > 15) {
                    break;
                }
                formData.append("pictures[]", file);
                i++;
            }
            console.log(formData.get("pictures[]"))
            formData.append("oldPictures", oldImagesArray);

            let contextPath =/*[[@{/}]]*/'';
            let url = contextPath.toString() + "secondary_objects/edit/" + idEntity;
            $.ajax({
                url: url,
                method: "POST",
                contentType: false,
                processData: false,
                data: formData,
                success: function () {
                    showNotification("Объект сохранен!", "", true);
                },
                error: function (xhr, status, error) {
                    if (xhr.status === 400) {
                        var errors = JSON.parse(xhr.responseText);
                        errors.forEach(function (error) {
                            console.log("Ошибка: " + error);
                            showNotification("Ошибка!", error, false);
                        });
                    } else {
                        console.log("Другая ошибка: " + xhr.status + " - " + error);
                        showNotification("Другая ошибка!", "Произошла ошибка на сервере", false);
                    }
                }
            })

        }

        var fileInput = document.getElementById("fileInput");
        var fileList = document.getElementById("fileList");
        let fileMap = new Map();
        let numFile = 0;

        function showFile() {
            if (fileInput.files.length > 0) {
                for (var i = 0; i < fileInput.files.length; i++) {
                    var selectedFile = fileInput.files[i];
                    if (
                        selectedFile.type === "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" ||
                        selectedFile.type === "application/pdf"
                    ) {
                        var fileLink = document.createElement("a");
                        fileLink.href = URL.createObjectURL(selectedFile);
                        fileLink.download = selectedFile.name;
                        fileLink.textContent = "Скачать " + selectedFile.name;
                        fileLink.id = "file" + numFile
                        fileList.appendChild(fileLink);
                        var deleteButton = document.createElement("button");
                        deleteButton.style.marginLeft = "20px";
                        deleteButton.classList.add("btn", "btn-danger", "btn-sm", "float-right", "for-delete");
                        deleteButton.innerHTML = `<i class="fa fa-trash"></i>`;
                        deleteButton.id = "deleteFile" + numFile;
                        fileList.appendChild(deleteButton);
                        var lineBreak = document.createElement("br");
                        lineBreak.id = "lineBreak" + numFile;
                        var lineBreak2 = document.createElement("br");
                        lineBreak2.id = "lineBreak2" + numFile;
                        let numListener = numFile;
                        deleteButton.addEventListener("click", function () {
                            deleteFile(fileLink.id, deleteButton.id, lineBreak.id, lineBreak2.id, numListener);
                        });
                        fileList.appendChild(lineBreak);
                        fileList.appendChild(lineBreak2);
                        fileMap.set(numListener, selectedFile);
                        numFile++;
                    } else {
                        showNotification("Выберите файл формата .xlsx или .pdf.", "", false);
                    }
                }
            }
            fileInput.value = "";
        }

        $(document).ready(function () {
            branchSelect3()
        })

        function deleteFile(e, e2, e3, e4, num) {
            $("#" + e).remove();
            $("#" + e2).remove();
            $("#" + e3).remove();
            $("#" + e4).remove();
            fileMap.delete(num);
        }

        var inputElement = document.getElementById("codeObject");
        inputElement.addEventListener("input", function () {
            var inputValue = inputElement.value;
            var numericValue = inputValue.replace(/[^0-9-]/g, '');
            inputElement.value = numericValue;
        });
        var inputElement2 = document.getElementById("footageOfRooms");
        inputElement2.addEventListener("input", function () {
            var inputValue = inputElement2.value;
            var numericValue = inputValue.replace(/[^0-9+]/g, '');
            inputElement2.value = numericValue;
        });

        function branchSelect3() {
            let contextPath = /*[[@{/}]]*/ '';
            let residentialComplexId = /*[[${element.getResidentialComplexId()}]]*/ '';
            let elementObjectBuilder = /*[[${elementObjectBuilder}]]*/ '';

            $('#branchSelect3').select2({
                ajax: {
                    url: contextPath + 'builder_objects/for/select',
                    dataType: 'json',
                    delay: 1500,
                    data: function (params) {
                        var number = params.page > 0 ? params.page - 1 : 0;
                        return {
                            query: params.term || '',
                            page: number,
                            size: 10
                        };
                    },
                    processResults: function (data, params) {
                        var results = data.content.map(function (item) {
                            return {id: item.id, text: item.name};
                        });
                        var hasMore = data.totalPages > data.number;
                        return {
                            results: results,
                            pagination: {
                                more: hasMore
                            }
                        };
                    },
                    cache: true
                },
            });
            console.log(residentialComplexId)
            $('#branchSelect3').append(new Option(elementObjectBuilder, residentialComplexId, true, true));
            // Установка начального значения
            $('#branchSelect3').val(residentialComplexId).trigger('change');
        }


        const previewTemplate = `<div class="dz-preview dz-file-preview">
<div class="dz-details">
  <div class="dz-thumbnail">
    <img data-dz-thumbnail>
    <span class="dz-nopreview">No preview</span>
    <div class="dz-success-mark"></div>
    <div class="dz-error-mark"></div>
    <div class="dz-error-message"><span data-dz-errormessage></span></div>
    <div class="progress">
      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuemin="0" aria-valuemax="1000" data-dz-uploadprogress></div>
    </div>
  </div>
  <div class="dz-filename" data-dz-name></div>
  <div class="dz-size" data-dz-size></div>
</div>
</div>`;
        let uploadedFiles = new Map();
        let oldImagesArray = [];
        let currentFiles = 0;

        var myDropzone = new Dropzone("#my-dropzoneSecondary_objects", {
            url: "/uploadFileSecondary_objects",
            acceptedFiles: ".jpg, .png, .icon, .jpeg",
            previewTemplate: previewTemplate,
            parallelUploads: 5,
            maxFilesize: 10,
            addRemoveLinks: true,
            maxFiles: 15,
            autoProcessQueue: true,
            success: function (file, response) {
                console.log("Файл загружен: " + file.name);
                console.log("Ответ сервера: " + response);
                console.log(currentFiles);
                console.log(myDropzone.maxFiles);
                currentFiles++;
                const imageElement = file.previewElement.querySelector("img[data-dz-thumbnail]");
                imageElement.src = file.dataURL;
            }
        })
        myDropzone.on('success', function (file, response) {
            console.log('Файл успешно загружен:', file.name);
            if (oldImagesArray.includes(file.name)) {
                uploadedFiles.set("wrr2142" + file.name, file);
            } else {
                uploadedFiles.set(file.name, file);
            }
        });
        myDropzone.on('removedfile', function (file) {
            console.log('Файл был удален:', file.name);
            currentFiles--;
            if (uploadedFiles.has(file.name)) {
                uploadedFiles.delete(file.name);
            } else {
                console.log('Файл не найден в uploadedFiles Map.');
                oldImagesArray = oldImagesArray.filter(function (item) {
                    return item !== file.name;
                });
                console.log(oldImagesArray);
            }
            updateDropzoneMaxFiles()
        });
        myDropzone.on("addedfile", function (file) {
            console.log("Начало загрузки файла: " + file.name);

        });
        myDropzone.on('queuecomplete', function () {
            console.log('Загрузка всех файлов завершена.');
        });

        function updateDropzoneMaxFiles() {
            const newMaxFiles = (15 - oldImagesArray.length);
            myDropzone.options.maxFiles = newMaxFiles;
        }


        // Настройки
        $('#telephone').mask('+380999999999');
        $('[name="city"]').change(function () {
            let selectedValue = $(this).val();
            console.log(selectedValue)
            let contextPath = /*[[@{/}]]*/ '';
            let url = contextPath.toString() + "getDistrict/" + selectedValue.toString();
            console.log(url)
            if (selectedValue.toString() == "") {
                const container2 = $('[name="district"]');
                container2.empty();
                container2.prop('disabled', true);
            } else {
                $.ajax({
                    url: url,
                    method: "GET",
                    data: {
                        selectedValue: selectedValue
                    },
                    dataType: 'json',
                    success: function (data) {
                        console.log(data)
                        if (Array.isArray(data)) {
                            const container = $('[name="district"]');
                            if (container.is(':disabled')) {
                                container.removeAttr('disabled');
                            }
                            container.empty();
                            let selectionItem = '<option disabled selected value=""></option> ';
                            if (data.length > 0) {
                                data.forEach(function (category) {
                                    selectionItem += '<option value="' + category + '" data-translate="' + category.replaceAll(" ","_") + '">' + category + '</option>';
                                });
                            }
                            container.append(selectionItem);
                        }
                    },
                    error: function (error) {
                        console.log("Error:", error);
                    }
                });
            }
            refreshAllTranslate()
        });
        $("#region").change(function () {
            let selectedValue = $(this).val();
            console.log(selectedValue)
            let contextPath = /*[[@{/}]]*/ '';
            let url = contextPath.toString() + "getCity/" + selectedValue.toString();
            console.log(url)
            if (selectedValue.toString() == "") {
                const container = $('[name="city"]');
                container.empty();
                container.prop('disabled', true);
                const container2 = $('[name="district"]');
                container2.empty();
                container2.prop('disabled', true);
            } else {
                $.ajax({
                    url: url,
                    method: "GET",
                    data: {
                        selectedValue: selectedValue
                    },
                    dataType: 'json',
                    success: function (data) {
                        console.log(data)
                        if (Array.isArray(data)) {
                            const container = $('[name="city"]');
                            if (container.is(':disabled')) {
                                container.removeAttr('disabled');
                            }
                            container.empty();
                            let selectionItem = '<option disabled selected value=""></option> ';
                            if (data.length > 0) {
                                data.forEach(function (category) {
                                    selectionItem += '<option  data-translate="' + category.replaceAll(" ","_") + '" value="' + category + '">' + category + '</option>';
                                });
                            }
                            container.append(selectionItem);
                            const container2 = $('[name="district"]');
                            container2.empty();
                            container2.prop('disabled', true);
                        }
                    },
                    error: function (error) {
                        console.log("Error:", error);
                    }
                });
            }
            refreshAllTranslate()
        });

        document.addEventListener("DOMContentLoaded", async function () {

            let imagesDropzoneBase64 = /*[[${base64Images}]]*/ '';
            let base64ImagesSize = /*[[${base64ImagesSize}]]*/ '';
            let base64ImagesName = /*[[${base64ImagesListName}]]*/ '';
            let i = 1;
            imagesDropzoneBase64.forEach(function (base64Image) {
                let img = `data:image/jpeg;base64, ${base64Image}`;
                oldImagesArray.push(base64ImagesName[i - 1])
                const mockFile = {name: base64ImagesName[i - 1], dataURL: img, size: base64ImagesSize[i - 1]};
                myDropzone.emit("addedfile", mockFile);
                myDropzone.emit("thumbnail", mockFile, img);
                myDropzone.emit("complete", mockFile);

                i++;
            });
            updateDropzoneMaxFiles()

            let contextPath = /*[[@{/}]]*/ '';
            let checkObject = /*[[${element.getAddress().getRegion()}]]*/ '';
            let checkObjectCity = /*[[${element.getAddress().getCity()}]]*/ '';
            let checkObjectDistrict = /*[[${element.getAddress().getDistrict()}]]*/ '';
            let url = contextPath.toString() + "getCity/" + checkObject.toString();
            console.log(url)
            $.ajax({
                url: url,
                method: "GET",
                dataType: 'json',
                success: function (data) {
                    console.log(data)
                    if (Array.isArray(data)) {
                        const container = $('[name="city"]');
                        if (container.is(':disabled')) {
                            container.removeAttr('disabled');
                        }
                        container.empty();
                        let selectionItem = '<option disabled value=""></option> ';
                        if (data.length > 0) {
                            data.forEach(function (category) {
                                selectionItem += '<option data-translate="' + category.replaceAll(" ", "_") + '" value="' + category + '"';
                                if (category === checkObjectCity) {
                                    console.log("Успех")
                                    selectionItem += ' selected '
                                }
                                selectionItem += '>' + category + '</option>';

                            });
                        }
                        container.append(selectionItem);
                        refreshAllTranslate()
                    }
                },
                error: function (error) {
                    console.log("Error:", error);
                }
            });

            url = contextPath.toString() + "getDistrict/" + checkObjectCity.toString();
            $.ajax({
                url: url,
                method: "GET",
                dataType: 'json',
                success: function (data) {
                    console.log(data)
                    if (Array.isArray(data)) {
                        const container = $('[name="district"]');
                        if (container.is(':disabled')) {
                            container.removeAttr('disabled');
                        }
                        container.empty();
                        let selectionItem = '<option disabled value=""></option> ';
                        if (data.length > 0) {
                            data.forEach(function (category) {
                                selectionItem += '<option  data-translate="' + category.replaceAll(" ", "_") + '" value="' + category + '"';
                                console.log(category)
                                if (category === checkObjectDistrict) {
                                    selectionItem += ' selected '
                                }
                                selectionItem += '>' + category + '</option>';

                            });
                        }
                        container.append(selectionItem);
                    }
                },
                error: function (error) {
                    console.log("Error:", error);
                }
            });


            await fetch(contextPath + "secondary_objects/files/" + idEntity)
                .then(response => response.json())  // Преобразование ответа в JSON
                .then(data => {
                    console.log("Received data from server:", data);
                    displayFiles(data);
                })
                .catch(error => console.error('Error fetching files:', error));
            refreshAllTranslate();

        });
        let idEntity =/*[[${element.id}]]*/ '';

        function displayFiles(base64FileList) {
            if (!Array.isArray(base64FileList)) {
                console.error("Invalid data format. Expected an array.");
                return;
            }

            var fileList = document.getElementById("fileList");
            let filesElement =/*[[${element.files}]]*/ [];

            // Создание элементов для отображения или скачивания файлов
            base64FileList.forEach(function (base64Data, index) {
                var fileName = filesElement[index];
                var link = document.createElement("a");
                link.href = "data:application/octet-stream;base64," + base64Data;
                link.download = filesElement[index];
                let indexOfDot = fileName.indexOf('.');
                let resultString;
                if (indexOfDot !== -1) {
                    resultString = fileName.substring(indexOfDot + 1);
                    // Или используйте slice:
                    // let resultString = inputString.slice(indexOfDot + 1);

                    console.log(resultString);
                }
                link.textContent = "Скачать " + resultString;
                link.id = "oldFile" + index;
                fileList.appendChild(link);

                let deleteButton = document.createElement("button");
                deleteButton.style.marginLeft = "20px";
                deleteButton.classList.add("btn", "btn-danger", "btn-sm", "float-right", "for-delete");
                deleteButton.innerHTML = `<i class="fa fa-trash"></i>`;
                deleteButton.id = "deleteOldFile" + index;
                fileList.appendChild(deleteButton);
                var lineBreak = document.createElement("br");
                lineBreak.id = "lineBreakOld" + index;
                var lineBreak2 = document.createElement("br");
                lineBreak2.id = "lineBreakOld2" + index;
                let numListener = index;

                deleteButton.addEventListener("click", function () {
                    deleteFile(link.id, deleteButton.id, lineBreak.id, lineBreak2.id, numListener, oldFileMap);
                });
                fileList.appendChild(lineBreak);
                fileList.appendChild(lineBreak2);
                oldFileMap.set(numListener, fileName);
                numFile++;
            });
        }

        oldFileMap = new Map();


    </script>
</main>


</body>
</html>