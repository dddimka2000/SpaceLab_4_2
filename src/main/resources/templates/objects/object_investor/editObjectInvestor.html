<!DOCTYPE html>
<html
        lang="en"
        class="light-style layout-navbar-fixed layout-menu-fixed"
        layout:decorate="~{layout.html}" xmlns:layout="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <link rel="icon" type="image/x-icon"
          th:href="@{/img/favicon/1644809631_5-abrakadabra-fun-p-domik-na-belom-fone-12.png}">
    <title data-translate="менеджер_обєкту_від_інвесторів"></title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.maskedinput@1.4.1/src/jquery.maskedinput.min.js"
            type="text/javascript"></script>
    <link rel="stylesheet" th:href="@{/vendor/fonts/fontawesome.css}">
    <link rel="stylesheet" th:href="@{/vendor/fonts/tabler-icons.css}">
    <link rel="stylesheet" th:href="@{/vendor/fonts/flag-icons.css}">
    <link rel="stylesheet" th:href="@{/css/demo.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/perfect-scrollbar/perfect-scrollbar.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/node-waves/node-waves.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/typeahead-js/typeahead.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/select2/select2.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/formvalidation/dist/css/formValidation.min.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/animate-css/animate.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/sweetalert2/sweetalert2.css}">
    <script th:src="@{/vendor/js/helpers.js}"></script>
    <link rel="stylesheet" th:href="@{/vendor/libs/typeahead-js/typeahead.css}">
    <link rel="stylesheet" th:href="@{/vendor/libs/dropzone/dropzone.css}">
    <script th:src="@{/vendor/libs/select2/select2.js}"></script>
    <style>
        .notification {
            position: fixed;
            top: 90px;
            right: 40px; /* Расстояние справа */
            padding: 10px;
            border: 1px solid #ccc;
            text-align: center;
            transition: opacity 0.5s ease-in-out;
        }

        .notification.hidden {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
</body>

<main layout:fragment="content">

    <div class="content-wrapper">
        <div class="container-fluid">
            <br>
            <div class="d-flex justify-content-between">
                <h4 class="fw-bold" data-translate="edit_object">Редактировать объект</h4>
                <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" class="d-flex align-items-center">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a th:href="@{/}" data-translate="main">Главная</a></li>
                        <li class="breadcrumb-item"><a th:href="@{/investor_objects}" data-translate="investor_objects">Объекты
                            от инвесторов</a></li>
                        <li data-translate="edit_investor_object" class="breadcrumb-item active" aria-current="page"
                            th:href="@{/investor_objects/create}">
                            Редакция объекта от инвестора
                        </li>
                    </ol>
                </nav>
            </div>
            <hr style="margin-top: -5px">
            <br>
            <ul class="nav nav-pills mb-3" role="tablist">
                <li class="nav-item">
                    <button id="ruLangSave" class="nav-link active" type="button" aria-selected="true" data-toggle="tab"
                            role="tab"
                            data-bs-toggle="pill" onclick="changeInput('ru')">Ру
                    </button>
                </li>
                <li class="nav-item">
                    <button id="euLangSave" class="nav-link" type="button" aria-selected="false" data-toggle="tab"
                            role="tab"
                            data-bs-toggle="pill" onclick="changeInput('eu')">Eng
                    </button>
                </li>
                <li class="nav-item">
                    <button id="ukrLangSave" class="nav-link" type="button" aria-selected="false" data-toggle="tab"
                            role="tab"
                            data-bs-toggle="pill" onclick="changeInput('ukr')">Укр
                    </button>
                </li>
            </ul>
            <br>
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-home"
                            type="button" role="tab" aria-controls="pills-home" aria-selected="true"
                            data-translate="address_section">Адрессная часть
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-contact"
                            type="button" role="tab" aria-controls="pills-contact" aria-selected="false"
                            data-translate="main_section">Основное
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-profile"
                            type="button" role="tab" aria-controls="pills-profile" aria-selected="false"

                            data-translate="gallery">Галерея
                    </button>
                </li>
            </ul>
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                    <div class="row">

                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="region_district">Обл.район</h6>
                            <select class="select2 form-select form-select select2find" name="region"
                                    id="region">
                                <option selected disabled></option>
                                <script th:inline="javascript">
                                    var selectRegionOptions = /*[[${selectRegion}]]*/ [];
                                    var selectRegion = /*[[${element.getAddress().getRegion()}]]*/ '';

                                    for (var i = 0; i < selectRegionOptions.length; i++) {
                                        var entity = selectRegionOptions[i];
                                        var isSelected = (entity === selectRegion);
                                        document.write('<option value="' + entity + '" data-translate="' + entity.replace(' ', '_') + '"' + (isSelected ? ' selected' : '') + '>' + entity + '</option>');
                                    }
                                    refreshAllTranslate()
                                </script>

                            </select>

                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="city">Нас.пункт</h6>
                            <select class="select2 form-select form-select select2find" name="city" disabled>
                            </select>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="district">Район</h6>
                            <select class="select2 form-select form-select select2find" name="district" disabled>
                                <option selected value="" disabled></option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                            </select></div>
                        <div class="col-lg-2 col-sm-6">
                            <div style="display:block;" class="ruContent nameContent">
                                <h6 data-translate="street">Улица</h6>
                                <input class="form-control" type="text" name="street" id="street"
                                       data-translate-placeholder="enter_street" placeholder="Введите улицу"
                                       th:value="${element.getAddress().getStreet()}">
                            </div>
                            <div style="display:none;" class="euContent nameContent">
                                <h6 data-translate="street">Улица</h6>
                                <input class="form-control" type="text" name="streetEu" id="streetEu"
                                       data-translate-placeholder="enter_street" placeholder="Введите улицу"
                                       th:value="${element.getAddress().getStreetEng()}">
                            </div>
                            <div style="display:none;" class="ukrContent nameContent">
                                <h6 data-translate="street">Вулиця</h6>
                                <input class="form-control" type="text" name="streetUkr" id="streetUkr"
                                       data-translate-placeholder="enter_street" placeholder="Введите улицу"
                                       th:value="${element.getAddress().getStreetUkr()}">
                            </div>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="topzone">Топозона</h6>
                            <select class="select2 form-select form-select select2find" name="topozone">
                                <option value="" selected></option>
                                <option th:each="entity : ${selectTopozone}"
                                        th:value="${entity}"
                                        th:text="${entity}" th:data-translate="${entity}"
                                        th:selected="${element.getAddress().getZone() == entity}"></option>
                            </select>

                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="house_number">Номер дома</h6>
                            <input class="form-control" type="number" name="houseNumber"
                                   data-translate-placeholder="enter_house_number" placeholder="Введите номер дома"
                                   th:value="${element.getAddress().getHouseNumber()}">
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="section_building">Секция/Корпус</h6>
                            <input class="form-control" type="number" name="section"
                                   placeholder="Введите секцию/корпус" th:value="${element.getAddress().getSection()}">
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="apartment_number">Номер квартиры</h6>
                            <input type="text" class="form-control" name="apartmentNumber" id="apartmentNumber"
                                   placeholder="Введите номер квартиры" th:value="${element.getApartmentNumber()}">
                        </div>
                        <div class="col-lg-3 col-sm-6" style="display: flex;align-items: end">
                            <button class="btn btn-info" onclick="checkNumber()" data-translate="check_phone_number">
                                Проверить номер телефона
                            </button>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <div style="display:block;" class="ruContent nameContent">
                                <h6 data-translate="owner_name">ФИО владельца </h6>
                                <input class="form-control" type="text" name="owner"
                                       data-translate-placeholder="enter_owner_name" placeholder="Введите ФИО владельца"
                                       th:value="${element.getOwnerName()}">
                            </div>
                            <div style="display:none;" class="euContent nameContent">
                                <h6 data-translate="owner_name">ФИО владельца </h6>
                                <input class="form-control" type="text" name="ownerEu"
                                       data-translate-placeholder="enter_owner_name" placeholder="Введите ФИО владельца"
                                       th:value="${element.getOwnerNameEng()}">
                            </div>
                            <div style="display:none;" class="ukrContent nameContent">
                                <h6 data-translate="owner_name">ФИО владельца </h6>
                                <input class="form-control" type="text" name="ownerUkr"
                                       data-translate-placeholder="enter_owner_name" placeholder="Введите ФИО владельца"
                                       th:value="${element.getOwnerNameUkr()}">
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="phone">Телефон</h6>
                            <input type="tel" name="telephone" id="telephone" class="form-control"
                                   data-translate-placeholder="enter_phone_number" placeholder="Введите номер телефона"
                                   th:value="${element.getOwnerPhone()}">
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="acquisition_date">Дата приобретения</h6>
                            <input class="form-control flatpickr-datetime" type="text" placeholder="YYYY/MM/DD"
                                   aria-describedby="defaultFormControlHelp" id="boughtDate" name="boughtDate"
                                   th:value="${element.getBoughtDate()}">
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="ownership_rights">Право собственности</h6>
                            <select class="select2 form-select form-select select2find" name="ownership">
                                <option th:each="status : ${ownershipType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getOwnershipType() == status}"></option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <h6 data-translate="important_notes">Важные заметки</h6>
                    <input data-translate-placeholder="enter_notes" class="form-control" type="text" id="notes"
                           placeholder="Введите заметки"
                           th:value="${element.getNotes()}">
                    <br>
                    <h6 data-translate="attach_files">Прикрепить файлы</h6>
                    <input type="file" class="form-control" name="fileInput" id="fileInput" onchange="showFile()"
                           accept=".pdf">
                    <br>
                    <div id="fileList">

                    </div>
                    <br>
                    <h3 data-translate="admin_comment">Комментарий администратора</h3>
                    <textarea class="form-control" style="width: 100%; height: 300px"
                              data-translate-placeholder="enter_comment" name="comment"
                              placeholder="Введите комментарий"
                              th:text="${element.getAdministrationComment()}"></textarea>
                    <br>
                </div>
                <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                    <div class="row">
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="publication_status">Статус публикации</h6>
                            <select class="select2 form-select form-select select2find" id="publicationStatus">
                                <option selected disabled></option>
                                <option th:each="status : ${publicationStatus}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getPublicationStatus() == status}"></option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="object_code">Код объекта</h6>
                            <input class="form-control" type="text" id="codeObject" placeholder="100-101-102"
                                   name="codeObject" th:value="${element.getObjectCode()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <div style="display:flex;  justify-content: space-between">
                                <span>
                                    <h6 data-translate="branch_code">Код филиала</h6>
                                </span>
                                <span><h6 data-translate="employee_code"> код сотрудника</h6></span>
                            </div>
                            <div style="display:flex; justify-content: space-between">
                                <div>
                                    <input class="form-control" type="number" id="codeBranch" placeholder="5"
                                           name="codeBranch"
                                           th:value="${element.getBranchCode != null ? element.getBranchCode() : ''}">
                                </div>
                                <span>—</span>
                                <div>
                                    <input class="form-control" type="number" id="codeStaff" name="codeStaff"
                                           placeholder="5"
                                           th:value="${element.getRealtor() != null ? element.getRealtor().getCode() : ''}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="RC">ЖК</h6>
                            <select id="branchSelect3" class="select2 form-select form-select"
                                    name="residentialComplex">
                            </select>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="landmark">Ориентир</h6>
                            <input class="form-control" type="text" id="reference_point"
                                   data-translate-placeholder="enter_landmark" placeholder="Введите ориентир"
                                   th:value="${element.getLandmark()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="number_of_floors">Этажность</h6>
                            <input class="form-control" type="number" name="floorQuantity"
                                   placeholder="5" th:value="${element.getFloorQuantity()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="floor">Этаж</h6>
                            <input class="form-control" type="number" name="floor" placeholder="4"
                                   th:value="${element.getFloor()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="rooms">Комнат</h6>
                            <input class="form-control" type="number" id="rooms" placeholder="4"
                                   th:value="${element.getRoomQuantity()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                        </div>
                    </div>
                    <br>
                    <h6 data-translate="price">Цена</h6>
                    <input class="form-control" type="number" id="price" placeholder="10000"
                           th:value="${element.getPrice()}">
                    <br>
                    <div class="row">
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="completion_date">Срок сдачи</h6>
                            <select id="buildStatus" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${propertyBuildStatus}"
                                        th:value="${status}"
                                        th:text="${status.status}" th:data-translate="${status}"
                                        th:selected="${element.getBuildStatus() == status}"
                                ></option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="house_completion_year">Год срока сдачи дома</h6>
                            <input type="number" class="form-control" placeholder="2025"
                                   id="yearBuilding" th:value="${element.getBuildFinishDate}">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="S_total_area_sqm">S общая (м.кв.)*</h6>
                            <input class="form-control" type="number" id="areaTotal"
                                   placeholder="200" th:value="${element.getAreaTotal()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="S_living_area_sqm">S жилая (м.кв.)*</h6>
                            <input class="form-control" type="number" id="areaLiving"
                                   placeholder="100" th:value="${element.getAreaLiving()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="S_kitchen_area_sqm">S кухни (м.кв.)*</h6>
                            <input class="form-control" type="number" id="areaKitchen"
                                   placeholder="50" th:value="${element.getAreaKitchen()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="room_square">Метраж комнат</h6>
                            <input class="form-control" type="text" id="footageOfRooms"
                                   placeholder="10+10+10" th:value="${element.getRoomMeters()}">

                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="ceiling_height(m)">Высота потолка (м)</h6>
                            <input class="form-control" type="number" step="0.01" id="myNumberInput"
                                   data-translate-placeholder="enter_ceiling_height"
                                   placeholder="Введите высоту потолка" th:value="${element.getHeightCeiling()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="wall_material">Материал стен</h6>
                            <div style="display:block;" class="ruContent nameContent">
                                <input class="form-control" type="text" id="wall_material"
                                       data-translate-placeholder="enter_wall_material"
                                       placeholder="Введите материал стен" th:value="${element.getWallMaterial()}">
                            </div>
                            <div style="display:none;" class="euContent nameContent">
                                <input class="form-control" type="text" id="wall_materialEn"
                                       data-translate-placeholder="enter_wall_material"
                                       placeholder="Введите материал стен" th:value="${element.getWallMaterialEng()}">
                            </div>
                            <div style="display:none;" class="ukrContent nameContent">
                                <input class="form-control" type="text" id="wall_materialUkr"
                                       data-translate-placeholder="enter_wall_material"
                                       placeholder="Введите материал стен" th:value="${element.getWallMaterialUkr()}">
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="kitchen">Кухня</h6>
                            <select id="kitchen" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${kitchenType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getKitchenType() == status}"></option>
                            </select></div>
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="bathroom">Санузел</h6>
                            <select id="bathroom" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${bathroomType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getBathroomType() == status}"></option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="balcony_loggia">Балкон/лоджия</h6>
                            <select id="balcony" class="select2 form-select form-select select2find" name="balconyType">
                                <option selected disabled></option>
                                <option th:each="status : ${balconyType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getBalconyType() == status}"></option>
                            </select>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="window_view">Вид из окон</h6>
                            <select id="viewWindow" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${windowViewType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getWindowViewType() == status}"></option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="stove_type">Кухонная плита</h6>
                            <select class="select2 form-select form-select select2find" name="kitchenStoveType"
                                    id="kitchenStove">
                                <option selected disabled></option>
                                <option th:each="status : ${kitchenStoveType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getKitchenStoveType() == status}"></option>
                            </select></div>
                        <div class="col-lg-3 col-sm-6">
                            <h6 data-translate="heating">Отопление
                            </h6>
                            <select id="heating" class="select2 form-select form-select select2find">
                                <option selected disabled></option>
                                <option th:each="status : ${heatingType}"
                                        th:value="${status}"
                                        th:text="${status}" th:data-translate="${status}"
                                        th:selected="${element.getHeatingType() == status}"></option>
                            </select>
                        </div>
                        <br>

                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="last_contact_date">Дата последнего контакта</h6>
                            <input class="form-control flatpickr-datetime" placeholder="YYYY/MM/DD"
                                   aria-describedby="defaultFormControlHelp" id="dateLastContact" name="dateLastContact"
                                   th:value="${element.getLastContactDate()}">
                        </div>
                        <div class="col-lg-2 col-sm-6" style="display: flex; align-items: end">
                            <input class="form-check-input" type="checkbox" value="true" name="statusVNP"
                                   th:checked="${element.getVnp}">
                            <span class="checkmark" data-translate="VNP"> ВНП</span>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="VNP_until_date">Дата внп до</h6>
                            <input class="form-control flatpickr-datetime"
                                   placeholder="YYYY/MM/DD" type="text"
                                   aria-describedby="defaultFormControlHelp" id="dateVNP" name="dateVnp"
                                   th:value="${element.getVnpExpirationDate()}">
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <h6 data-translate="information_source">Источник информации</h6>
                            <input type="text" class="form-control" id="sourceInformation"
                                   data-translate-placeholder="enter_information_source"
                                   placeholder="Введите источник информации" th:value="${element.informationSource}">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-2 col-sm-6">
                            <input class="form-check-input" type="checkbox" value="true" name="tor"
                                   th:checked="${element.bargain}">
                            <span class="checkmark" data-translate="negotiable">Торг</span>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <input class="form-check-input" type="checkbox" value="true" name="exclusive"
                                   th:checked="${element.exclusive}">
                            <span class="checkmark" data-translate="exclusive">Ексклюзив</span>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <input class="form-check-input" type="checkbox" value="true" name="urgently"
                                   th:checked="${element.urgent}">
                            <span class="checkmark" data-translate="urgent">Срочно</span>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <input class="form-check-input" type="checkbox" value="true" name="free"
                                   th:checked="${element.free}">
                            <span class="checkmark" data-translate="free">Свободная</span>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <input class="form-check-input" type="checkbox" value="true" name="objectOpen"
                                   th:checked="${element.open}">
                            <span class="checkmark" data-translate="object_open">Объект открыт</span>
                        </div>
                        <div class="col-lg-2 col-sm-6">
                            <input class="form-check-input" type="checkbox" value="true" name="fromIntermediary"
                                   th:checked="${element.intermediary}">
                            <span class="checkmark" data-translate="FROM_INTERMEDIARY">От посредника</span>
                        </div>
                    </div>
                    <br>
                    <h6 data-translate="description">Описание</h6>
                    <div style="display:block;" class="ruContent nameContent">
                        <textarea class="form-control" style="width: 100%; height: 300px"
                                  name="descriptionObject" placeholder="Введите описание"
                                  data-translate-placeholder="enter_description"
                                  th:text="${element.description}"></textarea>
                    </div>
                    <div style="display:none;" class="euContent nameContent">
                        <textarea class="form-control" style="width: 100%; height: 300px"
                                  name="descriptionObjectEu" placeholder="Введите описание"
                                  data-translate-placeholder="enter_description"
                                  th:text="${element.descriptionEn}"></textarea>
                    </div>
                    <div style="display:none;" class="ukrContent nameContent">
                         <textarea class="form-control" style="width: 100%; height: 300px"
                                   name="descriptionObjectUkr" placeholder="Введите описание"
                                   data-translate-placeholder="enter_description"
                                   th:text="${element.descriptionUk}"></textarea>
                    </div>
                    <h6 data-translate="advertising_title">Рекламный заголовок</h6>
                    <div style="display:block;" class="ruContent nameContent">
                        <input type="text" name="advertisingName" id="promotionName" class="form-control"
                               placeholder="Укажите рекламный заголовок" th:value="${element.advertisementHeadline}">
                    </div>
                    <div style="display:none;" class="euContent nameContent">
                        <input type="text" name="advertisingNameEu" id="promotionNameEu" class="form-control"
                               placeholder="Укажите рекламный заголовок" th:value="${element.advertisementHeadlineEn}">
                    </div>
                    <div style="display:none;" class="ukrContent nameContent">
                        <input type="text" name="advertisingNameUkr" id="promotionNameUkr" class="form-control"
                               placeholder="Укажите рекламный заголовок" th:value="${element.advertisementHeadlineUk}">
                    </div>
                    <br>
                    <h6 data-translate="advertising_text">Рекламный текст</h6>
                    <div style="display:block;" class="ruContent nameContent">
                       <textarea style="width: 100%; height: 300px" name="advertisingText"
                                 class="form-control" placeholder="Введите рекламный текст"
                                 th:text="${element.advertisementText}"></textarea>
                    </div>
                    <div style="display:none;" class="euContent nameContent">
                        <textarea style="width: 100%; height: 300px" name="advertisingTextEu"
                                  class="form-control" placeholder="Введите рекламный текст"
                                  th:text="${element.advertisementTextEn}"></textarea>
                    </div>
                    <div style="display:none;" class="ukrContent nameContent">
                        <textarea style="width: 100%; height: 300px" name="advertisingTextUkr"
                                  class="form-control" placeholder="Введите рекламный текст"
                                  th:text="${element.advertisementTextUk}"></textarea>
                    </div>
                    <br>
                    <input class="form-check-input" type="checkbox" value="true" name="statusPromotion"
                           th:checked="${element.advertisementEnabled}"><span
                        class="checkmark" data-translate="advertise">Рекламировать</span>

                </div>
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">

                    <div class="row">
                        <div class="col-12">
                            <div class="card-body">
                                <form action="/uploadFileInvestor" class="dropzone needsclick dz-clickable"
                                      id="my-dropzoneInvestor">
                                    <div class="dz-message needsclick">
                                        <span class="note needsclick"></span>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div style="text-align: right; margin: 20px">
                <!--                <button class="btn btn-submit" >Отмена</button>-->
                <span>
                <button data-translate="save" class="btn btn-success" hx-trigger="click" onclick="sendForm()">
                Сохранить </button>
            </span>
            </div>
        </div>
    </div>
    <div class="alert alert-warning notification  d-flex align-items-center hidden" role="alert"
         id="notification">

        <strong id="text_notification"></strong>
        <div>
            <span id="notification-message"></span>
        </div>
    </div>
    <script th:src="@{/vendor/libs/dropzone/dropzone.js}"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.1.0-rc.0/js/select2.min.js"></script>
    <link rel="stylesheet" th:href="@{/vendor/libs/flatpickr/flatpickr.css}"/>
    <script th:src="@{/vendor/libs/flatpickr/flatpickr.js}"></script>
    <script th:src="@{/vendor/libs/block-ui/block-ui.js}"></script>

    <script th:inline="javascript">
        $(document).ready(function () {

            var flatpickrElements = document.querySelectorAll(".flatpickr-datetime");

            flatpickrElements.forEach(function (element) {
                flatpickr(element, {
                    dateFormat: "Y/m/d"
                });
            });

        });

        let langOld = "ru";

        function changeInput(lang) {
            $(".nameContent").css("display", "none")
            $("." + lang + "Content").css("display", "block");
            langOld = lang.toString();
            console.log(langOld)
        }

        function checkNumber() {
            let checkNumber = $("#telephone").val()
            var regExp = /^\+380(31|32|33|34|35|36|38|39|41|43|44|45|46|20|89|94|92|91|67|68|96|97|98|70|90|91|67|68|96|97|98|70|87|89|50|66|95|99)\d{7}$/;
            console.log(checkNumber)
            if (regExp.test(checkNumber)) {
                showNotification("Номер корректный", "", true)
            } else {
                showNotification("Такого номера не существует", "", false)
            }
        }

        function sendForm() {
            $("#full_body").block({
                message: '<div style="display: flex; align-items: center; justify-content: center; height: 100vh;"><div class="pinner-border spinner-border text-primary" role="status" style="height: 10vw; width: 10vw; max-height: 400px; max-width: 400px;"></div></div>',
                css: {
                    backgroundColor: "transparent",
                    border: "0"
                },
                overlayCSS: {
                    backgroundColor: "#000",
                    opacity: 0.5
                }
            })
            let formData = new FormData();
            var address = {
                region: $("#region").val(),
                street: $("#street").val(),
                streetEng: $("#streetEu").val(),
                streetUkr: $("#streetUkr").val(),
                district: $('[name="district"]').val(),
                city: $('[name="city"]').val(),
                zone: $('[name="topozone"]').val(),
                section: $('[name="section"]').val(),
                houseNumber: $('[name="houseNumber"]').val()
            };
            for (var key in address) {
                if (address.hasOwnProperty(key)) {
                    formData.append("address." + key, address[key]);
                }
            }

            formData.append("buildFinishDate", $("#yearBuilding").val());
            formData.append("apartmentNumber", $('[name="apartmentNumber"]').val());
            formData.append("ownerName", $('[name="owner"]').val());
            formData.append("ownerNameEng", $('[name="ownerEu"]').val());
            formData.append("ownerNameUkr", $('[name="ownerUkr"]').val());
            formData.append("ownerPhone", $('[name="telephone"]').val());
            formData.append("boughtDate", $('[name="boughtDate"]').val());
            console.log(($('[name="boughtDate"]').val()))
            console.log($('[name="boughtDate"]').val())
            let indexFilesMap = 0;
            if (fileMap.size > 0) {
                for (const [key, file] of fileMap) {
                    formData.append(key, file);
                    formData.append(`files[${indexFilesMap}]`, file);
                    indexFilesMap++;
                }
            }
            indexFilesMap = 0

            if (oldFileMap.size > 0) {
                for (const [key, file] of oldFileMap) {
                    formData.append(key, file);
                    formData.append(`oldFiles[${indexFilesMap}]`, file);
                    indexFilesMap++;
                }
            }
            formData.append("administrationComment", $('[name="comment"]').val());
            formData.append("publicationStatus", $("#publicationStatus").val());
            formData.append("objectCode", $('[name="codeObject"]').val());
            formData.append("branchCode", $('[name="codeBranch"]').val());
            formData.append("ownershipType", $('[name="ownership"]').val());
            formData.append("landmark", $("#reference_point").val());
            formData.append("residentialComplexId", $('[name="residentialComplex"]').val());
            formData.append("floorQuantity", $('[name="floorQuantity"]').val());
            formData.append("floor", $('[name="floor"]').val());
            formData.append("employeeCode", $('[name="codeStaff"]').val());
            formData.append("roomQuantity", $("#rooms").val());
            formData.append("price", $("#price").val());
            formData.append("notes", $("#notes").val());

            formData.append("areaTotal", $("#areaTotal").val());
            formData.append("areaLiving", $("#areaLiving").val());
            formData.append("areaKitchen", $("#areaKitchen").val());
            formData.append("roomMeters", $("#footageOfRooms").val());

            formData.append("heightCeiling", $("#myNumberInput").val());
            formData.append("wallMaterial", $("#wall_material").val());
            formData.append("wallMaterialEng", $("#wall_materialEn").val());
            formData.append("wallMaterialUkr", $("#wall_materialUkr").val());

            formData.append("kitchenType", $("#kitchen").val());
            formData.append("buildStatus", $("#buildStatus").val());

            formData.append("bathroomType", $("#bathroom").val());
            formData.append("balconyType", $("#balcony").val());
            formData.append("windowViewType", $("#viewWindow").val());
            formData.append("kitchenStoveType", $("#kitchenStove").val());
            formData.append("heatingType", $("#heating").val());


            formData.append("lastContactDate", $("#dateLastContact").val());
            formData.append("vnp", $('[name="statusVNP"]').prop("checked"));
            formData.append("vnpExpirationDate", $("#dateVNP").val());

            formData.append("informationSource", $("#sourceInformation").val());
            formData.append("bargain", $('[name="tor"]').prop("checked"));
            formData.append("exclusive", $('[name="exclusive"]').prop("checked"));
            formData.append("urgent", $('[name="urgently"]').prop("checked"));
            formData.append("free", $('[name="free"]').prop("checked"));
            formData.append("open", $('[name="objectOpen"]').prop("checked"));
            formData.append("intermediary", $('[name="fromIntermediary"]').prop("checked"));

            formData.append("description", $('[name="descriptionObject"]').val());
            formData.append("descriptionEn", $('[name="descriptionObject"]').val());
            formData.append("descriptionUk", $('[name="descriptionObject"]').val());

            formData.append("advertisementHeadline", $('[name="advertisingName"]').val());
            formData.append("advertisementHeadlineEn", $('[name="advertisingNameEu"]').val());
            formData.append("advertisementHeadlineUk", $('[name="advertisingNameUkr"]').val());

            formData.append("advertisementText", $('[name="advertisingText"]').val());
            formData.append("advertisementTextEn", $('[name="advertisingTextEu"]').val());
            formData.append("advertisementTextUk", $('[name="advertisingTextUkr"]').val());

            formData.append("advertisementEnabled", $('[name="statusPromotion"]').prop("checked"));
            console.log($('[name="statusPromotion"]').prop("checked"))

            let i = 1;
            for (let [fileName, file] of uploadedFiles) {
                if (i > (15 - oldImagesArray.length)) {
                    break;
                }
                formData.append("pictures[]", file);
                i++;
            }

            formData.append("oldPictures", oldImagesArray);

            console.log(formData.get("pictures[]"))

            let contextPath =/*[[@{/}]]*/'';
            let url = contextPath.toString() + "investor_objects/edit/" + idEntity;
            if (!validAllInput(formData)) {
                $("#full_body").unblock();
                return
            }
            $.ajax({
                url: url,
                method: "POST",
                data: formData,
                headers: {'X-XSRF-TOKEN': [[${_csrf.token}]]},
                contentType: false,
                processData: false,
                success: function () {
                    $("#full_body").unblock();
                    showToastWithTranslate("saveObj", "success");
                },
                error: function (xhr, status, error) {
                    $("#full_body").unblock();
                    errorsQuantity = 0;
                    var errors = JSON.parse(xhr.responseText);
                    errors.forEach(function (error) {
                        let codeBranch = $("#codeBranch");
                        let codeStaff = $("#codeStaff");
                        let codeObject = $("#codeObject");
                        if (error === "Кода данного сотрудника не существует") {
                            errorsQuantity++;
                            showErrorCodeRealtor(codeStaff);
                        }
                        if (error === "Филиала с таким идом не существует") {
                            errorsQuantity++;
                            showErrorCodeBranch(codeBranch)
                        }
                        if(error=="Объект с таким кодом уже существует"){
                            errorsQuantity++;
                            showErrorCode(codeObject)
                        }
                        if (errorsQuantity == 0) {
                            showToast(error, "danger");
                        }
                    });
                }
            })
        }
        let errorsQuantity = 0;

        var fileInput = document.getElementById("fileInput");
        var fileList = document.getElementById("fileList");
        let fileMap = new Map();
        let numFile = 0;

        function showFile() {
            if (fileInput.files.length > 0) {
                for (var i = 0; i < fileInput.files.length; i++) {
                    var selectedFile = fileInput.files[i];
                    if (
                        selectedFile.type === "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" ||
                        selectedFile.type === "application/pdf"
                    ) {
                        var fileLink = document.createElement("a");
                        fileLink.href = URL.createObjectURL(selectedFile);
                        fileLink.download = selectedFile.name;
                        fileLink.textContent = "" + selectedFile.name;
                        fileLink.id = "file" + numFile
                        fileList.appendChild(fileLink);
                        var deleteButton = document.createElement("button");
                        deleteButton.style.marginLeft = "20px";
                        deleteButton.classList.add("btn", "btn-danger", "btn-sm", "float-right", "for-delete");
                        deleteButton.innerHTML = `<i class="fa fa-trash"></i>`;
                        deleteButton.id = "deleteFile" + numFile;
                        fileList.appendChild(deleteButton);
                        var lineBreak = document.createElement("br");
                        lineBreak.id = "lineBreak" + numFile;
                        var lineBreak2 = document.createElement("br");
                        lineBreak2.id = "lineBreak2" + numFile;
                        let numListener = numFile;
                        deleteButton.addEventListener("click", function () {
                            deleteFile(fileLink.id, deleteButton.id, lineBreak.id, lineBreak2.id, numListener, fileMap);
                        });
                        fileList.appendChild(lineBreak);
                        fileList.appendChild(lineBreak2);
                        fileMap.set(numListener, selectedFile);
                        numFile++;
                    } else {
                        showNotification("Выберите файл формата .xlsx или .pdf.", "", false);
                    }
                }
            }
            fileInput.value = "";
        }

        $(document).ready(function () {
            branchSelect3()
        })

        function deleteFile(e, e2, e3, e4, num, fileMap) {
            $("#" + e).remove();
            $("#" + e2).remove();
            $("#" + e3).remove();
            $("#" + e4).remove();
            fileMap.delete(num);

        }

        var inputElement = document.getElementById("codeObject");
        inputElement.addEventListener("input", function () {
            var inputValue = inputElement.value;
            var numericValue = inputValue.replace(/[^0-9-]/g, '');
            inputElement.value = numericValue;
        });
        var inputElement2 = document.getElementById("footageOfRooms");
        inputElement2.addEventListener("input", function () {
            var inputValue = inputElement2.value;
            var numericValue = inputValue.replace(/[^0-9+]/g, '');
            inputElement2.value = numericValue;
        });

        function branchSelect3() {
            let contextPath = /*[[@{/}]]*/ '';
            let residentialComplexId = /*[[${element.getResidentialComplexId()}]]*/ '';
            let elementObjectBuilder = /*[[${elementObjectBuilder}]]*/ '';

            $('#branchSelect3').select2({
                placeholder: translateValue('виберіть_обєкт'),
                language: languageForSelect2,
                ajax: {
                    url: contextPath + 'builder_objects/for/select',
                    dataType: 'json',
                    delay: 1500,
                    data: function (params) {
                        var number = params.page > 0 ? params.page - 1 : 0;
                        return {
                            query: params.term || '',
                            page: number,
                            size: 10
                        };
                    },
                    processResults: function (data, params) {
                        var results = data.content.map(function (item) {
                            return {id: item.id, text: item.name};
                        });
                        var hasMore = data.totalPages > data.number;
                        return {
                            results: results,
                            pagination: {
                                more: hasMore
                            }
                        };
                    },
                    cache: true
                },
            });
            console.log(residentialComplexId)
            $('#branchSelect3').append(new Option(elementObjectBuilder, residentialComplexId, true, true));
            // Установка начального значения
            $('#branchSelect3').val(residentialComplexId).trigger('change');
        }


        const previewTemplate = `<div class="dz-preview dz-file-preview">
<div class="dz-details">
  <div class="dz-thumbnail">
    <img data-dz-thumbnail>
    <span class="dz-nopreview">No preview</span>
    <div class="dz-success-mark"></div>
    <div class="dz-error-mark"></div>
    <div class="dz-error-message"><span data-dz-errormessage></span></div>
    <div class="progress">
      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuemin="0" aria-valuemax="1000" data-dz-uploadprogress></div>
    </div>
  </div>
  <div class="dz-filename" data-dz-name></div>
  <div class="dz-size" data-dz-size></div>
</div>
</div>`;
        let uploadedFiles = new Map();
        let oldImagesArray = [];
        let currentFiles = 0;

        var myDropzone = new Dropzone("#my-dropzoneInvestor", {
            url: "/uploadFileInvestor",
            acceptedFiles: ".jpg, .png, .icon, .jpeg",
            previewTemplate: previewTemplate,
            parallelUploads: 5,
            maxFilesize: 10,
            addRemoveLinks: true,
            maxFiles: 15,
            autoProcessQueue: true,
            success: function (file, response) {
                console.log("Файл загружен: " + file.name);
                console.log("Ответ сервера: " + response);
                console.log(currentFiles);
                console.log(myDropzone.maxFiles);
                currentFiles++;
                const imageElement = file.previewElement.querySelector("img[data-dz-thumbnail]");
                imageElement.src = file.dataURL;
            }
        })
        myDropzone.on('success', function (file, response) {
            console.log('Файл успешно загружен:', file.name);
            if (oldImagesArray.includes(file.name)) {
                uploadedFiles.set("wrr2142" + file.name, file);
            } else {
                uploadedFiles.set(file.name, file);
            }
        });
        myDropzone.on('removedfile', function (file) {
            console.log('Файл был удален:', file.name);
            currentFiles--;
            if (uploadedFiles.has(file.name)) {
                uploadedFiles.delete(file.name);
            } else {
                console.log('Файл не найден в uploadedFiles Map.');
                oldImagesArray = oldImagesArray.filter(function (item) {
                    return item !== file.name;
                });
                console.log(oldImagesArray);
            }
            updateDropzoneMaxFiles()
        });
        myDropzone.on("addedfile", function (file) {
            console.log("Начало загрузки файла: " + file.name);

        });
        myDropzone.on('queuecomplete', function () {
            console.log('Загрузка всех файлов завершена.');
        });

        function updateDropzoneMaxFiles() {
            const newMaxFiles = (15 - oldImagesArray.length);
            myDropzone.options.maxFiles = newMaxFiles;
        }


        // Настройки
        $('#telephone').mask('+380999999999');
        $('[name="city"]').change(function () {
            let selectedValue = $(this).val();
            console.log(selectedValue)
            let contextPath = /*[[@{/}]]*/ '';
            let url = contextPath.toString() + "getDistrict/" + selectedValue.toString();
            console.log(url)
            if (selectedValue.toString() == "") {
                const container2 = $('[name="district"]');
                container2.empty();
                container2.prop('disabled', true);
            } else {
                $.ajax({
                    url: url,
                    method: "GET",
                    data: {
                        selectedValue: selectedValue
                    },
                    dataType: 'json',
                    success: function (data) {
                        console.log(data)
                        if (Array.isArray(data)) {
                            const container = $('[name="district"]');
                            if (container.is(':disabled')) {
                                container.removeAttr('disabled');
                            }
                            container.empty();
                            let selectionItem = '<option disabled selected value=""></option> ';
                            if (data.length > 0) {
                                data.forEach(function (category) {
                                    selectionItem += '<option value="' + category + '" data-translate="' + category.replaceAll(" ", "_") + '">' + category + '</option>';
                                });
                            }
                            container.append(selectionItem);
                        }
                    },
                    error: function (error) {
                        console.log("Error:", error);
                    }
                });
            }
            refreshAllTranslate()
        });
        $("#region").change(function () {
            let selectedValue = $(this).val();
            console.log(selectedValue)
            let contextPath = /*[[@{/}]]*/ '';
            let url = contextPath.toString() + "getCity/" + selectedValue.toString();
            console.log(url)
            if (selectedValue.toString() == "") {
                const container = $('[name="city"]');
                container.empty();
                container.prop('disabled', true);
                const container2 = $('[name="district"]');
                container2.empty();
                container2.prop('disabled', true);
            } else {
                $.ajax({
                    url: url,
                    method: "GET",
                    data: {
                        selectedValue: selectedValue
                    },
                    dataType: 'json',
                    success: function (data) {
                        console.log(data)
                        if (Array.isArray(data)) {
                            const container = $('[name="city"]');
                            if (container.is(':disabled')) {
                                container.removeAttr('disabled');
                            }
                            container.empty();
                            let selectionItem = '<option disabled selected value=""></option> ';
                            if (data.length > 0) {
                                data.forEach(function (category) {
                                    selectionItem += '<option  data-translate="' + category.replaceAll(" ", "_") + '" value="' + category + '">' + category + '</option>';
                                });
                            }
                            container.append(selectionItem);
                            const container2 = $('[name="district"]');
                            container2.empty();
                            container2.prop('disabled', true);
                        }
                    },
                    error: function (error) {
                        console.log("Error:", error);
                    }
                });
            }
            refreshAllTranslate()
        });

        function validAllInput() {
            let isValidated = true
            cleanInputs();

            let comment = $('[name="comment"]');
            let region = $("#region");
            let street = $("#street");
            let streetEng = $("#streetEu");
            let streetUkr = $("#streetUkr");
            let district = $('[name="district"]')
            let city = $('[name="city"]')
            let topozone = $('[name="topozone"]')
            let section = $('[name="section"]')
            let houseNumber = $('[name="houseNumber"]')
            let apartmentNumber = $('[name="apartmentNumber"]');
            let buildFinishDate = $("#yearBuilding");

            let ownerName = $('[name="owner"]');
            let ownerNameEng = $('[name="ownerEu"]');
            let ownerNameUkr = $('[name="ownerUkr"]');

            let ownerPhone = $('[name="telephone"]');
            let boughtDate = $('[name="boughtDate"]');

            let administrationComment = $('[name="comment"]');
            let publicationStatus = $("#publicationStatus");
            let objectCode = $('[name="codeObject"]');
            let branchCode = $('[name="codeBranch"]');
            let employeeCode = $('[name="codeStaff"]');
            let ownershipType = $('[name="ownership"]');
            let landmark = $("#reference_point");
            let residentialComplexId = $('[name="residentialComplex"]');
            let floorQuantity = $('[name="floorQuantity"]');
            let floor = $('[name="floor"]');
            let roomQuantity = $("#rooms");
            let price = $("#price");
            let notes = $("#notes");


            let areaTotal = $("#areaTotal");
            let areaLiving = $("#areaLiving");
            let areaKitchen = $("#areaKitchen");
            let roomMeters = $("#footageOfRooms");

            let heightCeiling = $("#myNumberInput");
            let wallMaterial = $("#wall_material");
            let wallMaterialEng = $("#wall_materialEn");
            let wallMaterialUkr = $("#wall_materialUkr");


            let kitchenType = $("#kitchen");
            let buildStatus = $("#buildStatus");

            let bathroomType = $("#bathroom");
            let balconyType = $("#balcony");
            let windowViewType = $("#viewWindow");
            let kitchenStoveType = $("#kitchenStove");
            let heatingType = $("#heating");

            let lastContactDate = $("#dateLastContact");
            let vnpExpirationDate = $("#dateVNP");


            let informationSource = $("#sourceInformation");
            let description = $('[name="descriptionObject"]');
            let descriptionEn = $('[name="descriptionObjectEu"]');
            let descriptionUk = $('[name="descriptionObjectUkr"]');

            let advertisementHeadline = $('[name="advertisingName"]');
            let advertisementHeadlineEn = $('[name="advertisingNameEu"]');
            let advertisementHeadlineUk = $('[name="advertisingNameUkr"]');

            let advertisementText = $('[name="advertisingText"]');
            let advertisementTextEn = $('[name="advertisingTextEu"]');
            let advertisementTextUk = $('[name="advertisingTextUkr"]');

            if (!validSelect2(region)) isValidated = false
            if (!validSelect2(city)) isValidated = false
            if (!validSelect2(district)) isValidated = false
            if (!validString("1", "31", street)) {
                isValidated = false
                $("#ruLangSave").click();
            }
            if (!validString("1", "31", streetUkr)) {
                isValidated = false
                $("#ukrLangSave").click();
            }
            if (!validString("1", "31", streetEng)) {
                isValidated = false
                $("#euLangSave").click();
            }
            if (!validSelect2(topozone)) isValidated = false
            if (!validateNumber(1, 9999, houseNumber)) isValidated = false;
            if (!validateNumber(1, 9999, section)) isValidated = false;
            if (!validateNumber(1, 201, floorQuantity)) isValidated = false;
            if (!validSelect2(buildStatus)) isValidated = false
            if (!validatePhoneNumber(ownerPhone)) isValidated = false
            if (!validString("1", "5000", description)) {
                isValidated = false;
                $("#ruLangSave").click();
            }
            if (!validString("1", "5000", descriptionUk)) {
                isValidated = false;
                $("#ukrLangSave").click();
            }
            if (!validString("1", "5000", descriptionEn)) {
                isValidated = false;
                $("#euLangSave").click();
            }
            if (!validString("0", "5000", comment)) isValidated = false;
            if (!validString("1", "31", apartmentNumber)) isValidated = false;
            if (!validateNumber(0, 9999, buildFinishDate)) isValidated = false;
            if (!validString("1", "31", ownerName)) {
                isValidated = false;
                $("#ruLangSave").click();
            }
            if (!validString("1", "31", ownerNameEng)) {
                isValidated = false
                $("#euLangSave").click();
            }
            if (!validString("1", "31", ownerNameUkr)) {
                isValidated = false
                $("#ukrLangSave").click();
            }
            if (!validateDate(boughtDate)) isValidated = false;
            if (!validSelect2(publicationStatus)) isValidated = false
            if (!validSelect2(ownershipType)) isValidated = false
            if (!validateNumber(0, 9999, floor)) isValidated = false;
            if (!validSelect2(residentialComplexId)) isValidated = false
            if (!validateNumber(0, 9999, employeeCode)) isValidated = false;
            if (!validateNumber(0, 9999, branchCode)) isValidated = false;
            if (!validateNumber(0, 9999, areaTotal)) isValidated = false;
            if (!validateNumber(0, 9999, areaLiving)) isValidated = false;
            if (!validateNumber(0, 100000000, price)) isValidated = false;
            if (!validateNumber(0, 9999, areaKitchen)) isValidated = false;
            if (!validString("1", "100", roomMeters)) isValidated = false;
            if (!validateNumber(0, 9999, heightCeiling)) isValidated = false;
            if (!validString("1", "500", notes)) isValidated = false;
            if (!validateDate(lastContactDate)) isValidated = false;
            if (!validateDate(vnpExpirationDate)) isValidated = false;
            if (!validString("1", "31", wallMaterial)) {
                isValidated = false;
                $("#ruLangSave").click();
            }
            if (!validString("1", "31", wallMaterialEng)) {
                isValidated = false
                $("#euLangSave").click();
            }
            if (!validString("1", "31", wallMaterialUkr)) {
                isValidated = false
                $("#ukrLangSave").click();
            }
            if (!validateNumber(0, 20, roomQuantity)) isValidated = false;
            if (!validString("1", "15", objectCode)) isValidated = false;
            if (!validString("0", "20000", administrationComment)) isValidated = false;
            if (!validString("1", "100", landmark)) isValidated = false;
            if (!validSelect2(kitchenType)) isValidated = false
            if (!validSelect2(bathroomType)) isValidated = false
            if (!validSelect2(balconyType)) isValidated = false
            if (!validSelect2(windowViewType)) isValidated = false
            if (!validSelect2(kitchenStoveType)) isValidated = false
            if (!validSelect2(heatingType)) isValidated = false
            if (!validString("1", "50", advertisementHeadline)) {
                isValidated = false
                $("#ruLangSave").click();
            }
            if (!validString("1", "50", advertisementHeadlineUk)) {
                isValidated = false
                $("#ukrLangSave").click();
            }
            if (!validString("1", "50", advertisementHeadlineEn)) {
                isValidated = false
                $("#euLangSave").click();
            }
            if (!validString("1", "5000", advertisementText)) {
                isValidated = false;
                $("#ruLangSave").click();
            }
            if (!validString("1", "5000", advertisementTextUk)) {
                isValidated = false;
                $("#ukrLangSave").click();
            }
            if (!validString("1", "5000", advertisementTextEn)) {
                isValidated = false;
                $("#euLangSave").click();
            }
            if (!validString("1", "500", informationSource)) isValidated = false

            countError = 0;
            console.log(isValidated)
            return isValidated
        }

        document.addEventListener("DOMContentLoaded", function () {
            let imagesDropzoneBase64 = /*[[${base64Images}]]*/ '';
            let base64ImagesSize = /*[[${base64ImagesSize}]]*/ '';
            let base64ImagesName = /*[[${base64ImagesListName}]]*/ '';
            let i = 1;
            imagesDropzoneBase64.forEach(function (base64Image) {
                let img = `data:image/jpeg;base64, ${base64Image}`;
                oldImagesArray.push(base64ImagesName[i - 1])
                const mockFile = {name: base64ImagesName[i - 1], dataURL: img, size: base64ImagesSize[i - 1]};
                myDropzone.emit("addedfile", mockFile);
                myDropzone.emit("thumbnail", mockFile, img);
                myDropzone.emit("complete", mockFile);

                i++;
            });
            updateDropzoneMaxFiles()

            let contextPath = /*[[@{/}]]*/ '';
            let checkObject = /*[[${element.getAddress().getRegion()}]]*/ '';
            let checkObjectCity = /*[[${element.getAddress().getCity()}]]*/ '';
            let checkObjectDistrict = /*[[${element.getAddress().getDistrict()}]]*/ '';
            let url = contextPath.toString() + "getCity/" + checkObject.toString();
            console.log(url)
            $.ajax({
                url: url,
                method: "GET",
                dataType: 'json',
                success: function (data) {
                    console.log(data)
                    if (Array.isArray(data)) {
                        const container = $('[name="city"]');
                        if (container.is(':disabled')) {
                            container.removeAttr('disabled');
                        }
                        container.empty();
                        let selectionItem = '<option disabled value=""></option> ';
                        if (data.length > 0) {
                            data.forEach(function (category) {
                                selectionItem += '<option data-translate="' + category.replace(" ", "_") + '" value="' + category + '"';
                                if (category === checkObjectCity) {
                                    console.log("Успех")
                                    selectionItem += ' selected '
                                }
                                selectionItem += '>' + category + '</option>';

                            });
                        }
                        container.append(selectionItem);
                    }
                },
                error: function (error) {
                    console.log("Error:", error);
                }
            });

            url = contextPath.toString() + "getDistrict/" + checkObjectCity.toString();
            $.ajax({
                url: url,
                method: "GET",
                dataType: 'json',
                success: function (data) {
                    console.log(data)
                    if (Array.isArray(data)) {
                        const container = $('[name="district"]');
                        if (container.is(':disabled')) {
                            container.removeAttr('disabled');
                        }
                        container.empty();
                        let selectionItem = '<option disabled value=""></option> ';
                        if (data.length > 0) {
                            data.forEach(function (category) {
                                selectionItem += '<option data-translate="' + category.replace(" ", "_") + '"value="' + category + '"';
                                console.log(category)
                                if (category === checkObjectDistrict) {
                                    selectionItem += ' selected '
                                }
                                selectionItem += '>' + category + '</option>';

                            });
                        }
                        container.append(selectionItem);
                    }
                },
                error: function (error) {
                    console.log("Error:", error);
                }
            });


            fetch(contextPath + "investor_objects/files/" + idEntity)
                .then(response => response.json())  // Преобразование ответа в JSON
                .then(data => {
                    console.log("Received data from server:", data);
                    displayFiles(data);
                })
                .catch(error => console.error('Error fetching files:', error));
            refreshAllTranslate();
        });
        let idEntity =/*[[${element.id}]]*/ '';

        function displayFiles(base64FileList) {
            if (!Array.isArray(base64FileList)) {
                console.error("Invalid data format. Expected an array.");
                return;
            }

            var fileList = document.getElementById("fileList");
            let filesElement =/*[[${element.files}]]*/ [];

            // Создание элементов для отображения или скачивания файлов
            base64FileList.forEach(function (base64Data, index) {
                var fileName = filesElement[index];
                var link = document.createElement("a");
                link.href = "data:application/octet-stream;base64," + base64Data;
                link.download = filesElement[index];
                let indexOfDot = fileName.indexOf('.');
                let resultString;
                if (indexOfDot !== -1) {
                    resultString = fileName.substring(indexOfDot + 1);
                    // Или используйте slice:
                    // let resultString = inputString.slice(indexOfDot + 1);

                    console.log(resultString);
                }
                link.textContent = "" + resultString;
                link.id = "oldFile" + index;
                fileList.appendChild(link);

                let deleteButton = document.createElement("button");
                deleteButton.style.marginLeft = "20px";
                deleteButton.classList.add("btn", "btn-danger", "btn-sm", "float-right", "for-delete");
                deleteButton.innerHTML = `<i class="fa fa-trash"></i>`;
                deleteButton.id = "deleteOldFile" + index;
                fileList.appendChild(deleteButton);
                var lineBreak = document.createElement("br");
                lineBreak.id = "lineBreakOld" + index;
                var lineBreak2 = document.createElement("br");
                lineBreak2.id = "lineBreakOld2" + index;
                let numListener = index;

                deleteButton.addEventListener("click", function () {
                    deleteFile(link.id, deleteButton.id, lineBreak.id, lineBreak2.id, numListener, oldFileMap);
                });
                fileList.appendChild(lineBreak);
                fileList.appendChild(lineBreak2);
                oldFileMap.set(numListener, fileName);
                numFile++;
            });
        }


        oldFileMap = new Map();


    </script>
</main>
</body>
</html>