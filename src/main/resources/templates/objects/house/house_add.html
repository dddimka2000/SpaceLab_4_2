<!DOCTYPE html>
<html
        lang="en"
        class="light-style layout-navbar-fixed layout-menu-fixed"
        layout:decorate="~{layout.html}" xmlns:layout="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <title data-translate="менеджер_будинку"></title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
<section layout:fragment="content">

    <div class="content-wrapper">
        <div class="container-fluid">
            <br>
            <div class="d-flex justify-content-between">
                <h4 class="fw-bold" data-translate="new_object">Новый объект</h4>
                <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb" class="d-flex align-items-center">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a th:href="@{/}" data-translate="main">Главная</a></li>
                        <li class="breadcrumb-item"><a th:href="@{/houses}" data-translate="houses_and_plots">Дома и участки</a></li>
                        <li class="breadcrumb-item active" aria-current="page" data-translate="new_object">
                            Новый объект
                        </li>
                    </ol>
                </nav>
            </div>
            <hr style="margin-top: -5px">
            <br>
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-home"
                            type="button" role="tab" aria-controls="pills-home" aria-selected="true" data-translate="address_section">Адрессная часть
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-profile"
                            type="button" role="tab" aria-controls="pills-profile" aria-selected="false" data-translate="main_section">Основное
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-contact"
                            type="button" role="tab" aria-controls="pills-contact" aria-selected="false" data-translate="gallery">Галерея
                    </button>
                </li>
            </ul>
            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                    <div class="row">
                        <div class="col-2">
                            <span data-translate="house_number"></span>
                            <input type="text" class="form-control onlyNumber" id="houseNumber" placeholder="34">
                        </div>
                        <div class="col-2">
                            <span data-translate="region_district"></span>
                            <select class="form-control" id="region"> </select>
                        </div>
                        <div class="col-2" >
                            <span data-translate="city"></span>
                            <select class="form-control" id="city" disabled></select>
                        </div>
                        <div class="col-2">
                            <span data-translate="district"></span>
                            <select class="form-control" id="district" disabled></select>
                        </div>
                        <div class="col-2" >
                            <span data-translate="street"></span>
                            <input class="form-control" id="street">
                        </div>
                        <div class="col-2" >
                            <span data-translate="topzone"></span>
                            <select id="topzone"></select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col">
                            <button class="btn btn-info mt-4" style="width: auto; margin-right: 5px"
                                    onclick="checkAddress(this)" data-translate="check_address">Проверить адрес
                            </button>
                        </div>
                        <div class="col">
                            <button class="btn btn-info mt-4" onclick="checkPhone(this)" style="width: auto" data-translate="check_phone_number">Проверить
                                номер телефона
                            </button>
                        </div>
                        <div class="col">
                            <span data-translate="streetUK"></span>
                            <input class="form-control" id="streetUkr">
                        </div>
                        <div class="col">
                            <span data-translate="streetENG"></span>
                            <input class="form-control" id="streetEng">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-3">
                            <span data-translate="enter_owner_name"></span>
                            <input class="form-control" type="text" id="owner" placeholder="Введите ФИО владельца">
                        </div>
                        <div class="col-3">
                            <span data-translate="enter_phone_number"></span>
                            <input type="tel" id="telephone" class="form-control phone"
                                   placeholder="Введите номер телефона">
                        </div>
                        <div class="col-3">
                            <span data-translate="date_of_purchase"></span>
                            <input type="text" id="dateOfPurchase" class="form-control flatpickr-datetime"
                                   placeholder="YYYY/MM/DD"/>
                        </div>
                        <div class="col-3">
                            <span data-translate="ownership_rights"></span>
                            <select id="ownership"></select>
                        </div>
                    </div>
                    <br>
                    <span data-translate="enter_notes">
                    Важные заметки</span>
                    <input class="form-control" id="note" type="text" placeholder="Введите заметки">
                    <br>
                    <span data-translate="cadastral_number">Кадастровий номер участка</span>
                    <input class="form-control" id="cadastralNumber" type="text" style="width: 40%"
                           placeholder="XXX XXX XXX">
                    <br>
                    <span data-translate="idea_plot">Назначение участка</span>
                    <input class="form-control" id="ideaPlot" type="text" placeholder="Введите заметки">
                    <br>
                    <span data-translate="houses_files">Прикрепить файлы</span>
                    <input type="file" id="housesFiles" accept=".pdf" class="form-control" style="width: 40%" multiple>
                    <br>
                    <div id="block-for-file">
                    </div>
                    <br>
                    <h3 data-translate="administration_comment">Комментарий администратора</h3>
                    <textarea class="form-control" style="width: 100%; height: 300px" id="administrationComment"
                              placeholder="Введите комментарий"></textarea>
                    <br>
                </div>
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                    <div class="row">
                        <div class="col-3">
                            <span data-translate="publication_status">Статус публикации</span>
                            <select id="publicationStatus"></select>
                        </div>
                        <div class="col-3">
                            <span data-translate="code_object">Код объекта</span>
                            <input class="form-control onlyNumber" type="text" id="codeObject" placeholder="XX XXXX XX">
                        </div>
                        <div class="col-5">
                            <div class="row">
                                <div class="col-6" style="white-space: nowrap;">
                                    <span data-translate="branch_and_staff_code">Код филиала — Код сотрудника</span>
                                </div>
                            </div>
                            <div class="row" style="display:flex; align-items: center">
                                <div class="col-3" style="text-align: right">
                                    <input class="form-control onlyNumber" id="codeBranch" placeholder="Код филиала"
                                           name="codeBranch">
                                </div>
                                <div class="col-1">
                                    —
                                </div>
                                <div class="col-3">
                                    <input class="form-control onlyNumber" id="codeStaff" name="codeStaff"
                                           placeholder="Код сотрудника">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <span data-translate="landmark">Ориентир</span>
                    <input class="form-control" style="width: 40%;" type="text" id="landmark"
                           placeholder="Введите ориентир">
                    <br>
                    <span data-translate="price">Цена</span>
                    <input class="form-control onlyNumber" style="width: 40%;" type="text" id="price"
                           placeholder="Введите цену">
                    <br>
                    <div class="row">
                        <div class="col-3">
                            <span data-translate="property_type">Тип недвижимости</span>
                            <select id="propertyType"></select>
                        </div>
                        <div class="col-2">
                            <span data-translate="plot_area_total">S уч.(сот)</span>
                            <input class="form-control onlyNumber" id="plotAreaTotal" placeholder="12">
                        </div>
                        <div class="col-2">
                            <span data-translate="plotAreaFree">S уч.свободно(сот)</span>
                            <input class="form-control onlyNumber" id="plotAreaFree" placeholder="12">
                        </div>
                        <div class="col-2">
                            <span data-translate="landOwnershipPresent">Собственость на землю</span>
                            <select id="landOwnershipPresent">
                                <option value="true">есть</option>
                                <option value="false">нет</option>
                            </select>
                        </div>
                        <div class="col-3">
                            <span data-translate="plotPurposeType">Целевое назначение земли</span>
                            <select id="plotPurposeType"></select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-1">
                            <span data-translate="house_quantity">Кол.домов</span>
                            <input class="form-control onlyNumber" id="houseQuantity" placeholder="12">
                        </div>
                        <div class="col-1">
                            <span data-translate="floorQuantity">Етажей</span>
                            <input class="form-control onlyNumber" id="floorQuantity" placeholder="12">
                        </div>
                        <div class="col-1">
                            <span data-translate="room_quantity">Комнат</span>
                            <input class="form-control onlyNumber" id="roomQuantity" placeholder="12">
                        </div>
                        <div class="col-1">
                            <span data-translate="bedroomQuantity">Спален</span>
                            <input class="form-control onlyNumber" id="bedroomQuantity" placeholder="12">
                        </div>
                        <div class="col-2">
                            <span data-translate="ceiling_height(m)">Высота потолка (м)</span>
                            <input class="form-control onlyNumber" step="0.01" id="myNumberInput"
                                   placeholder="Введите высоту потолка">
                        </div>
                        <div class="col-2">
                            <span data-translate="area_total">S общая (м.кв.)*</span>
                            <input class="form-control onlyNumber" id="areaTotal"
                                   placeholder="Введите общую площадь">
                        </div>
                        <div class="col-2">
                            <span data-translate="areaLiving">S жилая (м.кв.)*</span>
                            <input class="form-control onlyNumber" id="areaLiving"
                                   placeholder="Введите жилую площадь">
                        </div>
                        <div class="col-2">
                            <span data-translate="areaKitchen">S кухни (м.кв.)*</span>
                            <input class="form-control onlyNumber" id="areaKitchen"
                                   placeholder="Введите площадь кухни">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-2">
                            <span data-translate="wall_material">Материал стен(RU)</span>
                            <input class="form-control" type="text" id="wall_material"
                                   placeholder="Введите материал стен">
                        </div>
                        <div class="col-2">
                            <span data-translate="wall_materialUkr">Материал стен(UK)</span>
                            <input class="form-control" type="text" id="wall_materialUkr"
                                   placeholder="Введите материал стен">
                        </div>
                        <div class="col-2">
                            <span data-translate="wall_materialEng">Материал стен(EN)</span>
                            <input class="form-control" type="text" id="wall_materialEng"
                                   placeholder="Введите материал стен">
                        </div>
                        <div class="col-2">
                            <span data-translate="stateInterior">Состояние интерьера</span>
                            <select id="stateInterior"></select>
                        </div>
                        <div class="col-2">
                            <span data-translate="stateHouse">Состояние дома</span>
                            <select id="stateHouse"></select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-3">
                            <span data-translate="kitchenType">Кухня</span>
                            <select id="kitchenType"></select>
                        </div>
                        <div class="col-3">
                            <span data-translate="bathroomType">Санузел</span>
                            <select id="bathroomType"></select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-3">
                            <span data-translate="gasType">Газ</span>
                            <select id="gasType"></select>
                        </div>
                        <div class="col-3">
                            <span data-translate="waterType">Вода</span>
                            <select id="waterType"></select>
                        </div>
                        <div class="col-3">
                            <span data-translate="sewageType">Канализация</span>
                            <select id="sewageType"></select>
                        </div>
                        <div class="col-3">
                            <span data-translate="heatingType">Отопление</span>
                            <select id="heatingType"></select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-3">
                            <span data-translate="ladderType">Лестница</span>
                            <select id="ladderType"></select>
                        </div>
                        <div class="col-3">
                            <span data-translate="roofType">Кровля</span>
                            <select id="roofType"></select>
                        </div>
                        <div class="col-3">
                            <span data-translate="floorType">Пол</span>
                            <select id="floorType"></select>
                        </div>
                        <div class="col-3">
                            <span data-translate="windowType">Тип окон</span>
                            <select id="windowType"></select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-3">
                            <span data-translate="carpentryType">Столярка</span>
                            <select id="carpentryType"></select>
                        </div>
                        <div class="col-3">
                            <span data-translate="frontDoorType">Входная дверь</span>
                            <select id="frontDoorType"></select>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-2" style="white-space: nowrap;">
                            <span data-translate="lastContactDate">Дата последнего контакта</span>
                            <input type="text" class="form-control flatpickr-datetime" id="lastContactDate"
                                   placeholder="YYYY/MM/DD"/>
                        </div>
                        <div class="col-1" style="display: flex; align-items: end">
                            <input class="form-check-input" type="checkbox" value="true" id="vnp" name="statusVNP">
                            <span class="checkmark" data-translate="vnp">ВНП</span>
                        </div>
                        <div class="col-2">
                            <span data-translate="vnpExpirationDate">Дата внп до</span>
                            <input type="text" class="form-control flatpickr-datetime" id="vnpExpirationDate"
                                   placeholder="YYYY/MM/DD"/>
                        </div>
                        <div class="col-2">
                            <span data-translate="informationSource">Источник информации</span>
                            <input type="text" class="form-control" id="informationSource"
                                   placeholder="Введите источник информации">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" id="bargain">
                            <span class="checkmark" data-translate="bargain">Торг</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" id="exclusive">
                            <span class="checkmark" data-translate="exclusive">Ексклюзив</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" id="urgent">
                            <span class="checkmark" data-translate="urgent">Срочно</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" id="free">
                            <span class="checkmark" data-translate="free">Свободная</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" id="open">
                            <span class="checkmark" data-translate="open">Объект открыт</span>
                        </div>
                        <div class="col-2">
                            <input class="form-check-input" type="checkbox" id="intermediary">
                            <span class="checkmark" data-translate="intermediary">От посредника</span>
                        </div>
                    </div>
                    <br>
                    <ul class="nav nav-pills mb-3" id="pills-block" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="pills-for-uk" data-bs-toggle="pill"
                                    data-bs-target="#pills-uk"
                                    type="button" role="tab" aria-controls="pills-home" aria-selected="true">UK
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pills-for-ru" data-bs-toggle="pill"
                                    data-bs-target="#pills-ru"
                                    type="button" role="tab" aria-controls="pills-profile" aria-selected="false">RU
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pills-for-en" data-bs-toggle="pill"
                                    data-bs-target="#pills-en"
                                    type="button" role="tab" aria-controls="pills-contact" aria-selected="false">EN
                            </button>
                        </li>
                    </ul>
                    <div class="tab-content" id="pills-blovk-content">
                        <div class="tab-pane fade show active" id="pills-uk" role="tabpanel"
                             aria-labelledby="pills-for-uk">
                            <span data-translate="description">Описание</span>
                            <textarea class="form-control" style="width: 100%; height: 300px"
                                      id="descriptionUk" placeholder="Введите описание"></textarea>
                            <br>
                            <span data-translate="enter_ad_title">Рекламный заголовок</span>
                            <input type="text" id="advertisementHeadlineUk" class="form-control"
                                   placeholder="Укажите рекламный заголовок">
                            <br>
                            <span data-translate="enter_ad_text">Рекламный текст</span>
                            <textarea style="width: 100%; height: 300px" id="advertisementTextUk"
                                      class="form-control" placeholder="Введите рекламный текст"></textarea>
                            <br>
                        </div>
                        <div class="tab-pane fade show" id="pills-ru" role="tabpanel" aria-labelledby="pills-for-ru">
                            <span data-translate="description">Описание</span>
                            <textarea class="form-control" style="width: 100%; height: 300px"
                                      id="descriptionRu" placeholder="Введите описание"></textarea>
                            <br>
                            <span data-translate="enter_ad_title">Рекламный заголовок</span>
                            <input type="text" id="advertisementHeadlineRu" class="form-control"
                                   placeholder="Укажите рекламный заголовок">
                            <br>
                            <span data-translate="enter_ad_text">Рекламный текст</span>
                            <textarea style="width: 100%; height: 300px" id="advertisementTextRu"
                                      class="form-control" placeholder="Введите рекламный текст"></textarea>
                            <br>
                        </div>
                        <div class="tab-pane fade show" id="pills-en" role="tabpanel" aria-labelledby="pills-for-en">
                            <span data-translate="description">Описание</span>
                            <textarea class="form-control" style="width: 100%; height: 300px"
                                      id="descriptionEn" placeholder="Введите описание"></textarea>
                            <br>
                            <span data-translate="enter_ad_title">Рекламный заголовок</span>
                            <input type="text" id="advertisementHeadlineEn" class="form-control"
                                   placeholder="Укажите рекламный заголовок">
                            <br>
                            <span data-translate="enter_ad_text">Рекламный текст</span>
                            <textarea style="width: 100%; height: 300px" id="advertisementTextEn"
                                      class="form-control" placeholder="Введите рекламный текст"></textarea>
                            <br>
                        </div>
                    </div>
                    <input class="form-check-input" type="checkbox" value="true" id="advertisementEnabled">
                    <span class="checkmark" data-translate="advertise">Рекламировать</span>
                    <br>
                </div>
                <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                    <div class="row">
                        <div class="col-12">
                            <div class="card-body">
                                <form action="/uploadFileInvestor" class="dropzone needsclick dz-clickable"
                                      id="my-dropzoneInvestor">
                                    <div class="dz-message needsclick">
                                        <span class="note needsclick"></span>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div style="text-align: right; margin: 20px">
                <button class="btn btn-submit" data-translate="cancel">Отмена</button>
                <span>
                <button class="btn btn-success" data-translate="save" hx-trigger="click" onclick="sendForm()">
                Сохранить </button>
            </span>
            </div>
        </div>
    </div>
    <script th:src="@{/vendor/libs/dropzone/dropzone.js}"></script>
    <script th:inline="javascript">
        let contextPathURL =/*[[@{/}]]*/'';

        function checkAddress() {
            cleanInputs()
            let streetUkr = $("#streetUkr").val();
            let url = contextPathURL + 'checkStreet';
            $.ajax({
                type: "GET",
                url: url,
                data: {
                    name: streetUkr
                },
                success: function (response, textStatus, xhr) {
                    if (xhr.status === 200) {
                        showToast(response, "success");
                    } else if (xhr.status === 400) {
                        showToast(response, "danger");
                    } else {
                        console.log("Необработанный статус ответа:", xhr.status);
                    }
                },
                error: function (xhr, textStatus, error) {
                    if (xhr.status === 400) {
                        showToast(xhr.responseText, "danger");
                    }
                    console.log(error);
                }
            })
        }
    </script>
    <script>
        function checkPhone(button) {
            cleanInputs()
            validatePhoneNumberWithAjax($('#telephone')).then(result => {
                if (result) {
                    showToast("Телефон коректний", "success");
                }
            }).catch(error => {
            })
        }
        function deleteFile(button, url) {
            $('#confirmationModal').modal('show');

            $('.confirm-delete').on('click', function () {
                var rowElement = button.closest('.row');
                if (rowElement) {
                    rowElement.remove();
                }
                $.ajax({
                    type: "Delete",
                    url: '[[@{/houses/deleteFile}]]',
                    data: {
                        id: getLastDigitFromPath(window.location.pathname),
                        url: url,
                    },
                    headers: { 'X-XSRF-TOKEN': '[[${_csrf.token}]]' },
                    success: function (response) {
                        showToast(response, "success")
                    },
                });
                $('#confirmationModal').modal('hide');
                $('.confirm-delete').off('click');
            });
            $('#confirmationModal .close, #confirmationModal [data-dismiss="modal"]').on('click', function () {
                $('#confirmationModal').modal('hide');
                $('.confirm-delete').off('click');
            });
        }
        function downloadFileFrom(url) {
            $.ajax({
                type: "GET",
                url: "[[@{/users/download}]]",
                xhrFields: {
                    responseType: 'blob'
                },
                data: {
                    url: url
                },
                success: function (data) {
                    var blob = new Blob([data], {type: 'application/octet-stream'});
                    var filename = "file.pdf";

                    if (window.navigator.msSaveOrOpenBlob) {
                        window.navigator.msSaveOrOpenBlob(blob, filename);
                    } else {
                        var link = document.createElement('a');
                        link.href = window.URL.createObjectURL(blob);
                        link.download = filename;
                        link.click();
                    }
                },
                error: function () {
                    console.log("Помилка завантаження файлу");
                }
            });
        }
        function validAllInput(formData) {
            var isValidated = true
            cleanInputs()
            var houseNumber = $("#houseNumber")
            var region = $("#region")
            var city = $("#city")
            var district = $("#district")
            var street = $("#street")
            var streetUkr = $("#streetUkr")
            var streetEng = $("#streetEng")
            var zone = $("#topzone")
            var ownerName = $("#owner")
            var ownerPhone = $("#telephone")
            var boughtDate = $("#dateOfPurchase")
            var ownershipType = $("#ownership")
            var notes = $("#note")
            var cadastralNumber = $("#cadastralNumber")
            var plotDescription = $("#ideaPlot")
            var files = $("#housesFiles")
            var administrationComment = $("#administrationComment")
            if (getLastDigitFromPath(window.location.pathname))
                formData.append("id", getLastDigitFromPath(window.location.pathname));
            formData.append("houseNumber", houseNumber.val());
            formData.append("region", region.val());
            formData.append("city", city.val());
            formData.append("district", district.val());
            formData.append("street", street.val());
            formData.append("streetEng", streetEng.val());
            formData.append("streetUkr", streetUkr.val());
            formData.append("zone", zone.val());
            formData.append("ownerName", ownerName.val());
            formData.append("ownerPhone", ownerPhone.val());
            formData.append("boughtDate", boughtDate.val());
            formData.append("ownershipType", ownershipType.val());
            formData.append("notes", notes.val());
            formData.append("cadastralNumber", cadastralNumber.val());
            formData.append("plotDescription", plotDescription.val());
            var filesElement = files[0].files;
            for (var i = 0; i < filesElement.length; i++) {
                formData.append("files", filesElement[i]);
            }
            formData.append("administrationComment", administrationComment.val());
            var publicationStatus = $("#publicationStatus");
            var codeObject = $("#codeObject");
            var codeBranch = $("#codeBranch");
            var codeStaff = $("#codeStaff");
            var landmark = $("#landmark");
            var price = $("#price");
            var propertyHouseType = $("#propertyType");
            var plotAreaTotal = $("#plotAreaTotal");
            var plotAreaFree = $("#plotAreaFree");
            var landOwnershipPresent = $("#landOwnershipPresent");
            var plotPurposeType = $("#plotPurposeType");
            var houseQuantity = $("#houseQuantity");
            var floorQuantity = $("#floorQuantity");
            var roomQuantity = $("#roomQuantity");
            var bedroomQuantity = $("#bedroomQuantity");
            var roomMeters = $("#myNumberInput");
            var areaTotal = $("#areaTotal");
            var areaLiving = $("#areaLiving");
            var areaKitchen = $("#areaKitchen");
            var lastContactDate = $("#lastContactDate");
            var vnp = $("#vnp");
            var vnpExpirationDate = $("#vnpExpirationDate");
            var informationSource = $("#informationSource");
            var bargain = $("#bargain");
            var exclusive = $("#exclusive");
            var urgent = $("#urgent");
            var free = $("#free");
            var open = $("#open");
            var intermediary = $("#intermediary");
            var descriptionUk = $("#descriptionUk");
            var advertisementHeadlineUk = $("#advertisementHeadlineUk");
            var advertisementTextUk = $("#advertisementTextUk");
            var descriptionRu = $("#descriptionRu");
            var advertisementHeadlineRu = $("#advertisementHeadlineRu");
            var advertisementTextRu = $("#advertisementTextRu");
            var descriptionEn = $("#descriptionEn");
            var advertisementHeadlineEn = $("#advertisementHeadlineEn");
            var advertisementTextEn = $("#advertisementTextEn");
            var advertisementEnabled = $("#advertisementEnabled");
            var allUploadedFiles = myDropzone.getAcceptedFiles();
            allUploadedFiles.forEach(function (file) {
                formData.append('pictures', file)
            })
            formData.append("publicationStatus", publicationStatus.val());
            formData.append("objectCode", codeObject.val());
            formData.append("branchCode", codeBranch.val());
            formData.append("codeStaff", codeStaff.val());
            formData.append("landmark", landmark.val());
            formData.append("price", price.val());
            formData.append("houseType", propertyHouseType.val());
            formData.append("plotAreaTotal", plotAreaTotal.val());
            formData.append("plotAreaFree", plotAreaFree.val());
            formData.append("landOwnershipPresent", landOwnershipPresent.val());
            formData.append("plotPurposeType", plotPurposeType.val());
            formData.append("houseQuantity", houseQuantity.val());
            formData.append("floorQuantity", floorQuantity.val());
            formData.append("roomQuantity", roomQuantity.val());
            formData.append("bedroomQuantity", bedroomQuantity.val());
            formData.append("roomMeters", roomMeters.val());
            formData.append("areaTotal", areaTotal.val());
            formData.append("areaLiving", areaLiving.val());
            formData.append("areaKitchen", areaKitchen.val());
            formData.append("lastContactDate", lastContactDate.val());
            formData.append("vnp", vnp.is(':checked'));
            formData.append("vnpExpirationDate", vnpExpirationDate.val());
            formData.append("informationSource", informationSource.val());
            formData.append("bargain", bargain.is(':checked'));
            formData.append("exclusive", exclusive.is(':checked'));
            formData.append("urgent", urgent.is(':checked'));
            formData.append("free", free.is(':checked'));
            formData.append("open", open.is(':checked'));
            formData.append("intermediary", intermediary.is(':checked'));
            formData.append("descriptionUk", descriptionUk.val());
            formData.append("advertisementHeadlineUk", advertisementHeadlineUk.val());
            formData.append("advertisementTextUk", advertisementTextUk.val());
            formData.append("description", descriptionRu.val());
            formData.append("advertisementHeadline", advertisementHeadlineRu.val());
            formData.append("advertisementText", advertisementTextRu.val());
            formData.append("descriptionEn", descriptionEn.val());
            formData.append("advertisementHeadlineEn", advertisementHeadlineEn.val());
            formData.append("advertisementTextEn", advertisementTextEn.val());
            formData.append("advertisementEnabled", advertisementEnabled.is(':checked'));

            var wallMaterial = $("#wall_material");
            var wallMaterialUkr = $("#wall_materialUkr");
            var wallMaterialEng = $("#wall_materialEng");
            var stateInterior = $("#stateInterior");
            var stateHouse = $("#stateHouse");
            var kitchenType = $("#kitchenType");
            var bathroomType = $("#bathroomType");
            var gasType = $("#gasType");
            var waterType = $("#waterType");
            var sewageType = $("#sewageType");
            var heatingType = $("#heatingType");
            var ladderType = $("#ladderType");
            var roofType = $("#roofType");
            var floorType = $("#floorType");
            var windowType = $("#windowType");
            var carpentryType = $("#carpentryType");
            var frontDoorType = $("#frontDoorType");

            if (!validateNumber(0, 9999, houseNumber)) isValidated = false
            if (!validSelect2(region)) isValidated = false
            if (!validSelect2(city)) isValidated = false
            if (!validSelect2(district)) isValidated = false
            if (!validString("5", "200", street)) isValidated = false
            if (!validString("5", "200", streetUkr)) isValidated = false
            if (!validString("5", "200", streetEng)) isValidated = false
            if (!validString("1", "80", landmark)) isValidated = false
            if (!validSelect2(zone)) isValidated = false
            if (!validString("5", "70", ownerName)) isValidated = false
            if (!validatePhoneNumber(ownerPhone)) isValidated = false
            if (!validateDate(boughtDate)) isValidated = false
            if (!validSelect2(ownershipType)) isValidated = false
            if (!validString("3", "1000", notes)) isValidated = false
            if (cadastralNumber.val().length !== 11) {
                cadastralNumber.css("border", "1px solid #ff0000");
                addText(cadastralNumber,"Кадастровий номер не коректний")
                isValidated = false
            }
            if (!validString("3", "1000", plotDescription)) isValidated = false
            if (!getLastDigitFromPath(window.location.pathname) && !validateFile('housesFiles', [".pdf"])) isValidated = false
            if (!validString("3", "1000", administrationComment)) isValidated = false
            if (!validSelect2(publicationStatus)) isValidated = false
            if (codeObject.val().replace(/\s/g, '').length !== 8) {
                codeObject.css("border", "1px solid #ff0000")
                addText(codeObject,"Код об'єкта має містити 8 символів")
                isValidated = false
            }
            if(!validAllNumberInput())isValidated = false
            if (!validateNumber(1, 1000000, codeBranch)) isValidated = false
            if (!validateNumber(1, 1000000, codeStaff)) isValidated = false
            if (!validateNumber(20000, 999999, price)) isValidated = false
            if (!validSelect2(propertyHouseType)) isValidated = false
            if (!validateNumber(3, 10000, plotAreaTotal)) isValidated = false
            if (!validateNumber(3, 10000, plotAreaFree)) isValidated = false
            if (!validSelect2(landOwnershipPresent)) isValidated = false
            if (!validSelect2(plotPurposeType)) isValidated = false
            if (!validateNumber(1, 1000, houseQuantity)) isValidated = false
            if (!validateNumber(1, 10000, floorQuantity)) isValidated = false
            if (!validateNumber(1, 10000, roomQuantity)) isValidated = false
            if (!validateNumber(1, 10000, bedroomQuantity)) isValidated = false
            if (!validateNumber(1, 10, roomMeters)) isValidated = false
            if (!validateNumber(3, 10000, areaTotal)) isValidated = false
            if (!validateNumber(3, 10000, areaLiving)) isValidated = false
            if (!validateNumber(3, 10000, areaKitchen)) isValidated = false
            if (!validateDate(lastContactDate)) isValidated = false
            if (!validateDate(vnpExpirationDate)) isValidated = false
            if (!validString("1", "300", informationSource)) isValidated = false
            if (!validString("1", "5000", descriptionUk)) isValidated = false
            if (!validString("1", "5000", descriptionRu)) isValidated = false
            if (!validString("1", "5000", descriptionEn)) isValidated = false
            if (!validString("1", "500", advertisementHeadlineUk)) isValidated = false
            if (!validString("1", "500", advertisementHeadlineRu)) isValidated = false
            if (!validString("1", "500", advertisementHeadlineEn)) isValidated = false
            if (!validString("1", "5000", advertisementTextUk)) isValidated = false
            if (!validString("1", "5000", advertisementTextRu)) isValidated = false
            if (!validString("1", "5000", advertisementTextEn)) isValidated = false
            if (!getLastDigitFromPath(window.location.pathname) && allUploadedFiles.length <= 0) {
                showToast("Як мінімум одне фото повино бути завантажене в дропзону", "danger")
                isValidated = false
            }
            if (!validString("1", "100", wallMaterial)) isValidated = false
            if (!validString("1", "100", wallMaterialUkr)) isValidated = false
            if (!validString("1", "100", wallMaterialEng)) isValidated = false
            if (!validSelect2(stateInterior)) isValidated = false
            if (!validSelect2(stateHouse)) isValidated = false
            if (!validSelect2(kitchenType)) isValidated = false
            if (!validSelect2(bathroomType)) isValidated = false
            if (!validSelect2(gasType)) isValidated = false
            if (!validSelect2(waterType)) isValidated = false
            if (!validSelect2(sewageType)) isValidated = false
            if (!validSelect2(heatingType)) isValidated = false
            if (!validSelect2(ladderType)) isValidated = false
            if (!validSelect2(roofType)) isValidated = false
            if (!validSelect2(floorType)) isValidated = false
            if (!validSelect2(windowType)) isValidated = false
            if (!validSelect2(carpentryType)) isValidated = false
            if (!validSelect2(frontDoorType)) isValidated = false

            formData.append("wallMaterial", wallMaterial.val());
            formData.append("wallMaterialUkr", wallMaterialUkr.val());
            formData.append("wallMaterialEng", wallMaterialEng.val());
            formData.append("stateInterior", stateInterior.val());
            formData.append("stateHouse", stateHouse.val());
            formData.append("kitchenType", kitchenType.val());
            formData.append("bathroomType", bathroomType.val());
            formData.append("gasType", gasType.val());
            formData.append("waterType", waterType.val());
            formData.append("sewageType", sewageType.val());
            formData.append("heatingType", heatingType.val());
            formData.append("ladderType", ladderType.val());
            formData.append("roofType", roofType.val());
            formData.append("floorType", floorType.val());
            formData.append("windowType", windowType.val());
            formData.append("carpentryType", carpentryType.val());
            formData.append("frontDoorType", frontDoorType.val());
            countError = 0
            return isValidated
        }
        function sendForm() {
            let formData = new FormData();
            if (!validAllInput(formData)) return
            var branchCode = $("#codeBranch");
            var staffCode = $("#codeStaff");

            $.ajax({
                type: 'GET',
                url: '[[@{/realtors/getByCode/}]]' + staffCode.val(),
                success: function (realtor) {
                    if (realtor == '') {
                        scrollToElement(staffCode)
                        addText(staffCode, "Користувача за таким кодом не знайдено")
                        staffCode.css("border", "1px solid #ff0000");
                    } else if (realtor.branch.code.toString() !== branchCode.val().toString()) {
                        scrollToElement(branchCode)
                        addText(branchCode, "Ріелтор не належить вказаному філіалу")
                        branchCode.css("border", "1px solid #ff0000");
                    } else {
                        validatePhoneNumberWithAjax($('#telephone')).then(result => {
                            if (result) {
                                $.ajax({
                                    type: 'GET',
                                    url: '[[@{/object/checkCode}]]',
                                    data: {code: $("#codeObject").val()},
                                    success: function (response) {
                                        if(response && !getLastDigitFromPath(window.location.pathname)){
                                            addText($("#codeObject"),"Об'єкт з таким кодом вже існує")
                                            $("#codeObject").css("border", "1px solid #ff0000")
                                            scrollToElement($("#codeObject"))
                                        }
                                        else {
                                            $.ajax({
                                                type: 'POST',
                                                url: '[[@{/houses/add/info}]]',
                                                data: formData,
                                                headers: { 'X-XSRF-TOKEN': '[[${_csrf.token}]]' },
                                                contentType: false,
                                                processData: false,
                                                success: function (response) {
                                                    showToast(response.status, "success")
                                                },
                                                error: function (xhr, status, error) {
                                                    if (xhr.status === 400) {
                                                        validDataFromResponse(xhr.responseJSON)
                                                    } else {
                                                        console.error('Помилка відправки файлів на сервер:', error);
                                                    }
                                                }
                                            })
                                        }
                                    },
                                })
                            }
                        }).catch(error => {
                        })
                    }
                }
            })
        }
        $(document).ready(function () {
            $('#landOwnershipPresent').select2({
                placeholder: translateValue('виберіть_обєкт'),
                language: languageForSelect2,
                minimumResultsForSearch: -1,
            })
            var houseId = getLastDigitFromPath(window.location.pathname)
            if (houseId != null) {
                $.ajax({
                    type: "Get",
                    url: '[[@{/houses/getById/}]]' + houseId,
                    success: function (house) {
                        $("#houseNumber").val(house.address.houseNumber)
                        $("#street").val(house.address.street)
                        $("#streetEng").val(house.address.streetEng)
                        $("#streetUkr").val(house.address.streetUkr)
                        $("#owner").val(house.ownerName)
                        $("#telephone").val(house.ownerPhone)
                        $("#dateOfPurchase").val(house.boughtDate.replaceAll('-', '/'))
                        $("#note").val(house.notes)
                        $("#cadastralNumber").val(house.cadastralNumber)
                        $("#ideaPlot").val(house.plotDescription)
                        $("#administrationComment").val(house.administrationComment)

                        $("#codeObject").val(house.objectCode)
                        if(house.realtor && house.realtor.branch)$("#codeBranch").val(house.realtor.branch.code)
                        if(house.realtor)$("#codeStaff").val(house.realtor.code)
                        $("#landmark").val(house.landmark)
                        $("#price").val(house.price)
                        $("#plotAreaTotal").val(house.plotAreaTotal)
                        $("#plotAreaFree").val(house.plotAreaFree)
                        $("#houseQuantity").val(house.houseQuantity)
                        $("#floorQuantity").val(house.floorQuantity)
                        $("#roomQuantity").val(house.roomQuantity)
                        $("#bedroomQuantity").val(house.bedroomQuantity)
                        $("#myNumberInput").val(house.roomMeters)
                        $("#areaTotal").val(house.areaTotal)
                        $("#areaLiving").val(house.areaLiving)
                        $("#areaKitchen").val(house.areaKitchen)

                        $("#wall_material").val(house.wallMaterial)
                        $("#wall_materialUkr").val(house.wallMaterialUkr)
                        $("#wall_materialEng").val(house.wallMaterialEng)

                        $("#lastContactDate").val(house.lastContactDate.replaceAll('-', '/'));
                        $("#vnpExpirationDate").val(house.vnpExpirationDate.replaceAll('-', '/'))

                        $("#vnp").prop('checked', house.vnp)
                        $("#informationSource").val(house.informationSource)
                        $('#bargain').prop('checked', house.bargain);
                        $('#exclusive').prop('checked', house.exclusive);
                        $('#urgent').prop('checked', house.urgent);
                        $('#free').prop('checked', house.free);
                        $('#open').prop('checked', house.open);
                        $('#intermediary').prop('checked', house.intermediary);
                        $('#advertisementEnabled').prop('checked', house.advertisementEnabled);

                        $("#descriptionUk").val(house.descriptionUk)
                        $("#advertisementHeadlineUk").val(house.advertisementHeadlineUk)
                        $("#advertisementTextUk").val(house.advertisementTextUk)
                        $("#descriptionRu").val(house.description)
                        $("#advertisementHeadlineRu").val(house.advertisementHeadline)
                        $("#advertisementTextRu").val(house.advertisementText)
                        $("#descriptionEn").val(house.descriptionEn)
                        $("#advertisementHeadlineEn").val(house.advertisementHeadlineEn)
                        $("#advertisementTextEn").val(house.advertisementTextEn)
                        $("#advertisementEnabled").val(house.advertisementEnabled)

                        forSelect2(house.address.zone, house.address.zone, "#topzone", "/enum/topzone")
                        forSelect2(house.ownershipType, house.ownershipType, "#ownership", "/enum/ownership")
                        forSelect2(house.publicationStatus, house.publicationStatus, "#publicationStatus", "/enum/publicationStatus")
                        forSelect2(house.houseType, house.houseType, "#propertyType", "/enum/propertyType")
                        forSelect2(house.plotPurposeType, house.plotPurposeType, "#plotPurposeType", "/enum/plotPurposeType")
                        forSelect2(house.stateInterior, house.stateInterior, "#stateInterior", "/enum/stateHouse")
                        forSelect2(house.stateHouse, house.stateHouse, "#stateHouse", "/enum/stateHouse")

                        forSelect2(house.kitchenType, house.kitchenType, "#kitchenType", "/enum/kitchen")
                        forSelect2(house.bathroomType, house.bathroomType, "#bathroomType", "/enum/bathroom")
                        forSelect2(house.gasType, house.gasType, "#gasType", "/enum/gas")
                        forSelect2(house.waterType, house.waterType, "#waterType", "/enum/water")
                        forSelect2(house.sewageType, house.sewageType, "#sewageType", "/enum/sewerage")
                        forSelect2(house.heatingType, house.heatingType, "#heatingType", "/enum/heating")
                        forSelect2(house.ladderType, house.ladderType, "#ladderType", "/enum/ladder")
                        forSelect2(house.roofType, house.roofType, "#roofType", "/enum/roof")
                        forSelect2(house.floorType, house.floorType, "#floorType", "/enum/floor")
                        forSelect2(house.windowType, house.windowType, "#windowType", "/enum/window")
                        forSelect2(house.carpentryType, house.carpentryType, "#carpentryType", "/enum/carpentryType")
                        forSelect2(house.frontDoorType, house.frontDoorType, "#frontDoorType", "/enum/frontDoorType")

                        addressSelect2(house)

                        for (let file of house.files) {
                            var blockForFile = $("#block-for-file");
                            var row = $("<div class='row'></div>");
                            var col1 = $("<div class='col-2'><a href='#' class='text-decoration-none'>" + removeBeforeFirstDot(file) + "</a></div>");
                            col1.find('a').on("click", function () {
                                downloadFileFrom(file);
                            });
                            var col2 = $("<div class='col'><a href='#' class='text-decoration-none for-delete'>х удалить</a></div>");
                            col2.find('a').on("click", function () {
                                deleteFile(this, file);
                            });
                            row.append(col1);
                            row.append(col2);
                            blockForFile.append(row);
                        }
                    }
                })
            } else {
                forSelect2(undefined, undefined, "#topzone", "/enum/topzone")
                forSelect2(undefined, undefined, "#ownership", "/enum/ownership")
                forSelect2(undefined, undefined, "#publicationStatus", "/enum/publicationStatus")
                forSelect2(undefined, undefined, "#propertyType", "/enum/propertyType")
                forSelect2(undefined, undefined, "#plotPurposeType", "/enum/plotPurposeType")
                forSelect2(undefined, undefined, "#stateInterior", "/enum/stateHouse")
                forSelect2(undefined, undefined, "#stateHouse", "/enum/stateHouse")

                forSelect2(undefined, undefined, "#kitchenType", "/enum/kitchen")
                forSelect2(undefined, undefined, "#bathroomType", "/enum/bathroom")
                forSelect2(undefined, undefined, "#gasType", "/enum/gas")
                forSelect2(undefined, undefined, "#waterType", "/enum/water")
                forSelect2(undefined, undefined, "#sewageType", "/enum/sewerage")
                forSelect2(undefined, undefined, "#heatingType", "/enum/heating")
                forSelect2(undefined, undefined, "#ladderType", "/enum/ladder")
                forSelect2(undefined, undefined, "#roofType", "/enum/roof")
                forSelect2(undefined, undefined, "#floorType", "/enum/floor")
                forSelect2(undefined, undefined, "#windowType", "/enum/window")
                forSelect2(undefined, undefined, "#carpentryType", "/enum/carpentryType")
                forSelect2(undefined, undefined, "#frontDoorType", "/enum/frontDoorType")

                addressSelect2()
            }
            new Cleave("#cadastralNumber", {
                blocks: [3, 3, 3],
                numericOnly: true
            })
            new Cleave("#codeObject", {
                blocks: [2, 4, 2],
                numericOnly: true
            })

            var flatpickrDateTimes = document.querySelectorAll(".flatpickr-datetime");

            flatpickrDateTimes.forEach(function (element) {
                element.flatpickr({
                    dateFormat: "Y/m/d"
                });
            });
            changeLanguageNav(languageSecondExample)
        })
        function addressSelect2(house) {
            if (house) {
                $("#district").removeAttr("disabled");
                $("#city").removeAttr("disabled");
                forSelect2(house.address.region, house.address.region, "#region", "/enum/region")
                forSelect2(house.address.district, house.address.district, "#district", "/getDistrict/" + house.address.city)
                forSelect2(house.address.city, house.address.city, "#city", "/getCity/" + house.address.region)
            } else {
                $("#region").select2({
                    placeholder: translateValue('виберіть_обєкт'),
                    language: languageForSelect2,
                    minimumResultsForSearch: -1,
                    ajax: {
                        url: '[[@{/enum/region}]]',
                        dataType: 'json',
                        processResults: function (data) {
                            var index = 0;
                            var results = data.map(function (data) {
                                if (data.id) return {id: data.id, text: translateValue(data.name)};
                                return {id: data, text: translateValue(data)};
                            });
                            return {
                                results: results
                            };
                        },
                    }
                })
            }
            $('#region').on('select2:select', function (e) {
                var element = e.params.data.id
                $("#city").empty();
                $("#city").removeAttr("disabled");

                $("#district").empty();
                $("#district").prop("disabled", true);
                $("#city").select2({
                    placeholder: translateValue('виберіть_обєкт'),
                    language: languageForSelect2,
                    minimumResultsForSearch: -1,
                    ajax: {
                        url: '[[@{/getCity/}]]' + element,
                        dataType: 'json',
                        processResults: function (data) {
                            var index = 0;
                            var results = data.map(function (data) {
                                if (data.id) return {id: data.id, text: translateValue(data.name)};
                                return {id: data, text: translateValue(data)};
                            });
                            return {
                                results: results
                            };
                        },
                    }
                })
            });
            $('#city').on('select2:select', function (e) {
                var element = e.params.data.id
                $("#district").empty();
                $("#district").removeAttr("disabled");
                $("#district").select2({
                    placeholder: translateValue('виберіть_обєкт'),
                    language: languageForSelect2,
                    minimumResultsForSearch: -1,
                    ajax: {
                        url: '[[@{/getDistrict/}]]' + element,
                        dataType: 'json',
                        processResults: function (data) {
                            var index = 0;
                            var results = data.map(function (data) {
                                if (data.id) return {id: data.id, text: translateValue(data.name)};
                                return {id: data, text: translateValue(data)};
                            });
                            return {
                                results: results
                            };
                        },
                    }
                })
            });
        }
        const previewTemplate = `<div class="dz-preview dz-file-preview">
<div class="dz-details">
  <div class="dz-thumbnail">
    <img data-dz-thumbnail>
    <span class="dz-nopreview">No preview</span>
    <div class="dz-success-mark"></div>
    <div class="dz-error-mark"></div>
    <div class="dz-error-message"><span data-dz-errormessage></span></div>
    <div class="progress">
      <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuemin="0" aria-valuemax="1000" data-dz-uploadprogress></div>
    </div>
  </div>
  <div class="dz-filename" data-dz-name></div>
  <div class="dz-size" data-dz-size></div>
</div>
</div>`;
        let uploadedFiles = new Map();
        let oldImagesArray = [];
        let currentFiles = 0;
        var myDropzone = new Dropzone("#my-dropzoneInvestor", {
            url: "/uploadFileInvestor",
            acceptedFiles: ".jpg, .png, .icon, .jpeg",
            previewTemplate: previewTemplate,
            parallelUploads: 5,
            maxFilesize: 10,
            addRemoveLinks: true,
            maxFiles: 15,
            autoProcessQueue: true,
            success: function (file, response) {
                console.log("Файл загружен: " + file.name);
                console.log("Ответ сервера: " + response);
                console.log(currentFiles);
                console.log(myDropzone.maxFiles);
                currentFiles++;
                const imageElement = file.previewElement.querySelector("img[data-dz-thumbnail]");
                imageElement.src = file.dataURL;
            }
        })
        myDropzone.on('success', function (file, response) {
            console.log('Файл успешно загружен:', file.name);
            if (oldImagesArray.includes(file.name)) {
                uploadedFiles.set("wrr2142" + file.name, file);
            } else {
                uploadedFiles.set(file.name, file);
            }
        });
        myDropzone.on('removedfile', function (file) {
            console.log('Файл был удален:', file.name);
            currentFiles--;
            if (uploadedFiles.has(file.name)) {
                uploadedFiles.delete(file.name);
            } else {
                if (file.description) {
                    $.ajax({
                        url: "[[@{/houses/deletePicture/}]]" + getLastDigitFromPath(window.location.pathname),
                        method: "Delete",
                        data: {
                            url: file.description,
                        },
                        headers: { 'X-XSRF-TOKEN': '[[${_csrf.token}]]' },
                        success: function (response) {
                            showToast(response, "success")
                        },
                        error: function (error) {
                            console.error("Помилка при отриманні списку файлів: ", error);
                        }
                    });
                }
                console.log('Файл не найден в uploadedFiles Map.');
                oldImagesArray = oldImagesArray.filter(function (item) {
                    return item !== file.name;
                });
                console.log(oldImagesArray);
            }
            updateDropzoneMaxFiles()
        });
        myDropzone.on("addedfile", function (file) {
            console.log("Начало загрузки файла: " + file.name);

        });
        myDropzone.on('queuecomplete', function () {
            console.log('Загрузка всех файлов завершена.');
        });
        if (getLastDigitFromPath(window.location.pathname)) {
            $.ajax({
                url: "[[@{/houses/getPicture/}]]" + getLastDigitFromPath(window.location.pathname),
                method: "GET",
                success: function (files) {
                    files.forEach(function (file) {
                        var mockFile = {
                            name: removeBeforeFirstDot(file.originUrl),
                            size: file.size,
                            description: file.originUrl
                        };
                        myDropzone.emit("addedfile", mockFile);
                        myDropzone.emit("thumbnail", mockFile, file.url);
                        myDropzone.emit("complete", mockFile);
                    });
                },
                error: function (error) {
                    console.error("Помилка при отриманні списку файлів: ", error);
                }
            });
        }
        function updateDropzoneMaxFiles() {
            const newMaxFiles = (15 - oldImagesArray.length);
            myDropzone.options.maxFiles = newMaxFiles;
        }
    </script>
</section>
</body>
</html>